<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>CATSLAB BLOG</title>
  
  
  <link href="/catslab_blog/atom.xml" rel="self"/>
  
  <link href="https://cantapiya.github.io/catslab_blog/"/>
  <updated>2019-04-26T02:23:24.718Z</updated>
  <id>https://cantapiya.github.io/catslab_blog/</id>
  
  <author>
    <name>bychkim</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>AWS Settings and Installation</title>
    <link href="https://cantapiya.github.io/catslab_blog/k8s-AWS-settings/"/>
    <id>https://cantapiya.github.io/catslab_blog/k8s-AWS-settings/</id>
    <published>2019-04-26T22:00:00.000Z</published>
    <updated>2019-04-26T02:23:24.718Z</updated>
    
    <content type="html"><![CDATA[<h2 id="AWS-인스턴스-생성-및-구동하기"><a href="#AWS-인스턴스-생성-및-구동하기" class="headerlink" title="AWS 인스턴스 생성 및 구동하기"></a>AWS 인스턴스 생성 및 구동하기</h2><p>먼저 AWS 루트 사용자 로그인을 진행합니다.<br>로그인 후 인스턴스 생성을 위해 다음 과정을 진행합니다.</p><ul><li>“AWS Management Console - 솔루션 구축 : EC2 사용하여”를 진행합니다.</li></ul><p><img src="https://user-images.githubusercontent.com/47657715/56702818-0111f500-6741-11e9-8686-64f4a0b74c6a.png" alt="시작: 솔루션 구축"></p><h3 id="단계-1-Amazon-Machine-Image-AMI-선택"><a href="#단계-1-Amazon-Machine-Image-AMI-선택" class="headerlink" title="단계 1: Amazon Machine Image(AMI) 선택"></a>단계 1: Amazon Machine Image(AMI) 선택</h3><ul><li>“Ubuntu Server 18.04 LTS (HVM), SSD Volume Type -ami- (64비트(x86))”를 선택합니다.</li></ul><p><img src="https://user-images.githubusercontent.com/47657715/56702865-2999ef00-6741-11e9-906a-7cc6ca81b5f5.png" alt="단계 1: AMI 선택"></p><h2 id="단계-2-인스턴스-유형-선택"><a href="#단계-2-인스턴스-유형-선택" class="headerlink" title="단계 2: 인스턴스 유형 선택"></a>단계 2: 인스턴스 유형 선택</h2><ul><li>“t2.micro” 유형을 선택 후 “검토 및 시작”을 진행합니다.</li></ul><p><img src="https://user-images.githubusercontent.com/47657715/56702902-636af580-6741-11e9-8e28-c06131186a03.png" alt="단계 2: 인스턴스 유형 선택"></p><h2 id="단계-7-인스턴스-시작-검토"><a href="#단계-7-인스턴스-시작-검토" class="headerlink" title="단계 7: 인스턴스 시작 검토"></a>단계 7: 인스턴스 시작 검토</h2><ul><li>선택 사항을 확인 후 시작하기를 통해 다음 단계를 진행합니다.</li></ul><p><img src="https://user-images.githubusercontent.com/47657715/56703073-2fdc9b00-6742-11e9-8053-d57944fbb32c.png" alt="단계 7: 인스턴스 시작 검토"></p><ul><li><p>기존 키 페어 선택 또는 새 키 페어 생성을 진행합니다.</p></li><li><p>기존에 사용하는 키 페어가 없는 경우 새 키 페어 생성 후 키 페어 다운로드를 진행합니다. </p></li><li><p>키 페어 이름을 설정한 뒤 프라이빗 키 파일(*.pem)을 다운로드 후 인스턴스를 시작합니다.</p></li></ul><p><img src="https://user-images.githubusercontent.com/47657715/56703160-a2e61180-6742-11e9-8039-5f32696a4949.png" alt="기존 키 페어 선택 또는 새 키 페어 생성"></p><ul><li>인스턴스 시작 후 인스턴스 탭에서 생성된 인스턴스의 정보를 확인하고, 인스턴스 보기를 진행하여 생성한 인스턴스를 확인합니다.</li></ul><p><img src="https://user-images.githubusercontent.com/47657715/56703219-d7f26400-6742-11e9-82f1-e5c5156da25d.png" alt="인스턴스 정보 확인"></p><ul><li>인스턴스가 생성이 되어 시작 중(pending) 상태에서 사용할 준비가 되면 실행 중(running) 상태로 변경됩니다.</li></ul><p><img src="https://user-images.githubusercontent.com/47657715/56703279-0a03c600-6743-11e9-86e7-aa75f519a05e.png" alt="인스턴스 보기"></p><ul><li>생성한 인스턴스의 IPv4 퍼블릭 IP을 이용하여 인스턴스에 접속이 가능합니다. (pem키를 생성하여 보관, pem키를 통하여 접속)</li></ul><p><img src="https://user-images.githubusercontent.com/47657715/56703330-3c152800-6743-11e9-83b8-814bdac5cf1a.png" alt="IPv4 퍼블릭 IP 확인"></p><ul><li>다음 명령어를 통해 생성한 인스턴스로 접속할 수 있습니다.</li></ul><p><code>~$ sudo ssh -i [KEY_PAIR_NAME].pem ubuntu@[IPv4 퍼블릭 IP]</code></p><p><img src="https://user-images.githubusercontent.com/47657715/56703430-b5147f80-6743-11e9-877e-2b769593d779.png" alt="인스턴스 접속"></p><h2 id="kops-설치-및-kubectl-설치"><a href="#kops-설치-및-kubectl-설치" class="headerlink" title="kops 설치 및 kubectl 설치"></a>kops 설치 및 kubectl 설치</h2><h3 id="kops-설치"><a href="#kops-설치" class="headerlink" title="kops 설치"></a>kops 설치</h3><p>kops는 Kubernetes 클러스터를 만들어 주는 CLI 도구이며, 실행 파일 하나만 다운 받으면 됩니다.</p><hr><p><code>~$ wget -O kops https://github.com/kubernetes/kops/releases/download/$(curl -s https://api.github.com/repos/kubernetes/kops/releases/latest | grep tag_name | cut -d &#39;&quot;&#39; -f 4)/kops-linux-amd64</code><br><code>~$ chmod +x ./kops</code><br><code>~$ sudo mv ./kops /usr/local/bin/</code></p><hr><p><img src="https://user-images.githubusercontent.com/47657715/56703639-cc07a180-6744-11e9-91d8-3d8377ca6a66.png" alt="kops 설치"></p><h3 id="kubectl-설치"><a href="#kubectl-설치" class="headerlink" title="kubectl 설치"></a>kubectl 설치</h3><p>kubectl은 이미 만들어져 있는 Kubernetes 클러스터를 관리하기 위한 도구이며, 다음을 실행하여 실행 파일 하나만 다운 받으면 됩니다. </p><hr><p><code>~$ wget -O kubectl https://storage.googleapis.com/kubernetes-release/release/$(curl -s https://storage.googleapis.com/kubernetes-release/release/stable.txt)/bin/linux/amd64/kubectl</code><br><code>~$ chmod +x ./kubectl</code><br><code>~$ sudo mv ./kubectl /usr/local/bin/kubectl</code></p><hr><p><img src="https://user-images.githubusercontent.com/47657715/56703670-eccff700-6744-11e9-9edb-52eb8ad429ff.png" alt="kubectl 설치"></p><h2 id="IAM-유저-생성"><a href="#IAM-유저-생성" class="headerlink" title="IAM 유저 생성"></a>IAM 유저 생성</h2><p>kops가 동작하기 위해서는 AWS 권한이 필요하고 따라서 적당한 권한을 가지고 있는 IAM 유저를 생성해야 합니다.</p><ul><li>AWS 웹 콘솔에서 서비스 페이지를 열고 “보안, 자격 증명 및 규정 준수” 탭에서 “IAM”을 선택하여 IAM 유저 생성을 진행합니다.</li></ul><p><img src="https://user-images.githubusercontent.com/47657715/56703795-6cf65c80-6745-11e9-85a6-f0d0d699fe68.png" alt="IAM 유저 생성 01"></p><ul><li>“사용자” 탭에서 “사용자 추가”를 진행합니다.</li></ul><p><img src="https://user-images.githubusercontent.com/47657715/56703833-a7f89000-6745-11e9-8026-f1784b026778.png" alt="IAM 유저 생성 02"></p><ul><li>kops라는 사용자 이름을 추가하고 그룹에 사용자 추가를 진행하여 다음 권한을 가지고 있는 kops라는 그룹을 생성합니다.</li></ul><p><img src="https://user-images.githubusercontent.com/47657715/56704144-fce8d600-6746-11e9-8f0a-98662c01f6be.png" alt="IAM 유저 생성 03"></p><p><img src="https://user-images.githubusercontent.com/47657715/56704158-0c681f00-6747-11e9-8b12-76aea3b616df.png" alt="IAM 유저 생성 04"></p><p>검색창에 다음 정책들을 검색하여 권한을 설정합니다.</p><hr><p>AmazonEC2FullAccess<br>AmazonRoute53FullAccess<br>AmazonS3FullAccess<br>IAMFullAccess<br>AmazonVPCFullAccess</p><hr><p><img src="https://user-images.githubusercontent.com/47657715/56704208-3cafbd80-6747-11e9-9f52-1c91591c9734.png" alt="IAM 유저 생성 05"></p><ul><li>kops 그룹에 속한 kops라는 유저를 만들고 Access key ID와 Secret access key를 저장해 둡니다.</li></ul><p><img src="https://user-images.githubusercontent.com/47657715/56704242-5a7d2280-6747-11e9-9c08-a18f0d3f7bc8.png" alt="IAM 유저 생성 06"></p><p><img src="https://user-images.githubusercontent.com/47657715/56704292-85677680-6747-11e9-8f89-3f189cb746fd.png" alt="IAM 유저 생성 07"></p><ul><li>사용자 만들기를 진행하여 액세스 키 ID와 비밀 액세스 키를 확인 후 저장해 둡니다.</li></ul><p><img src="https://user-images.githubusercontent.com/47657715/56704330-ab8d1680-6747-11e9-9880-a34c59cf5297.png" alt="IAM 유저 생성 08"></p><p><img src="https://user-images.githubusercontent.com/47657715/56704438-10e10780-6748-11e9-853a-0f54ea699a33.png" alt="IAM 유저 생성 09"></p><ul><li>다음과 같이 kops 그룹에 kops 사용자가 추가되어 있는 것을 확인할 수 있습니다.</li></ul><p><img src="https://user-images.githubusercontent.com/47657715/56704462-29512200-6748-11e9-9ea9-1e83d9ce0787.png" alt="IAM 유저 생성 10"></p><p><img src="https://user-images.githubusercontent.com/47657715/56704465-2d7d3f80-6748-11e9-8ed0-04580845fd95.png" alt="IAM 유저 생성 11"></p><h3 id="AWS-CLI-설치"><a href="#AWS-CLI-설치" class="headerlink" title="AWS CLI 설치"></a>AWS CLI 설치</h3><p>클러스터를 생성하는 과정에서 AWS CLI가 필요합니다.  </p><p>AWS CLI 설치를 위해 다음을 실행하여 설치합니다.  </p><hr><p><code>~$ sudo apt update</code><br><code>~$ sudo apt install -y python-pip</code><br><code>~$ pip install awscli</code></p><hr><p>설치 후 aws 명령을 찾지 못한 경우 다시 로그인해 봅니다. (인스턴스 재접속)</p><p><img src="https://user-images.githubusercontent.com/47657715/56705214-0d9b4b00-674b-11e9-818f-0cd41c951930.png" alt="AWS CLI 설치">  </p><p>aws 환경 설정을 위해 aws configure를 입력 후 필요한 항목들을 입력합니다.  </p><p>AWS Access Key ID와 AWS Secret Access Key에는 IAM 그룹 및 사용자 설정 시 발급받은 Access Key와 Secret Access Key를 입력합니다.  </p><hr><p><code>~$ aws configure</code><br><code>~$ AWS Access Key ID [None]: &lt;Your access key id&gt;</code><br><code>~$ AWS Secret Access Key [None]: &lt;Your secret access key&gt;</code><br><code>~$ Default region name [None]: ap-northeast-2</code><br><code>~$ Default output format [None]:</code></p><hr><p><img src="https://user-images.githubusercontent.com/47657715/56705288-505d2300-674b-11e9-9e27-8ccf26f10a57.png" alt="AWS 환경설정">  </p><p>환경설정이 제대로 되었는지 다음과 같은 명령어를 통해 확인해 볼 수 있습니다.  </p><hr><p><code>~$ aws ec2 describe-instances</code><br><code>~$ aws iam list-users</code></p><hr><p><img src="https://user-images.githubusercontent.com/47657715/56705373-95815500-674b-11e9-87b7-8eed8984bdc7.png" alt="AWS 환경설정 확인 01"></p><p><img src="https://user-images.githubusercontent.com/47657715/56705377-97e3af00-674b-11e9-8bdf-355ceba7dc78.png" alt="AWS 환경설정 확인 02">  </p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;AWS-인스턴스-생성-및-구동하기&quot;&gt;&lt;a href=&quot;#AWS-인스턴스-생성-및-구동하기&quot; class=&quot;headerlink&quot; title=&quot;AWS 인스턴스 생성 및 구동하기&quot;&gt;&lt;/a&gt;AWS 인스턴스 생성 및 구동하기&lt;/h2&gt;&lt;p&gt;먼저 AWS
      
    
    </summary>
    
      <category term="Kubernetes" scheme="https://cantapiya.github.io/catslab_blog/categories/Kubernetes/"/>
    
      <category term="AWS Settings &amp; Installation" scheme="https://cantapiya.github.io/catslab_blog/categories/Kubernetes/AWS-Settings-Installation/"/>
    
    
  </entry>
  
  <entry>
    <title>k8s Cluster on AWS with Kops</title>
    <link href="https://cantapiya.github.io/catslab_blog/k8s-kops-cluster/"/>
    <id>https://cantapiya.github.io/catslab_blog/k8s-kops-cluster/</id>
    <published>2019-04-26T22:00:00.000Z</published>
    <updated>2019-04-26T02:23:29.889Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Kops-이용하여-Cluster-생성하기"><a href="#Kops-이용하여-Cluster-생성하기" class="headerlink" title="Kops 이용하여 Cluster 생성하기"></a>Kops 이용하여 Cluster 생성하기</h2><p><a href="https://cantapiya.github.io/catslab_blog/k8s-AWS-settings/">AWS Settings and Installation</a>를 통해 AWS 환경설정 및 kops, kubectl, AWS CLI의 설치가 완료되었으면 kops를 이용하여 클러스터 구축을 진행합니다.</p><h3 id="S3-버킷-생성"><a href="#S3-버킷-생성" class="headerlink" title="S3 버킷 생성"></a>S3 버킷 생성</h3><p>클러스터를 생성하기 위해 S3 버킷을 생성하고, 환경 변수를 설정 및 SSH Key Pair를 생성 후 클러스터를 생성합니다.  </p><p>먼저 클러스터의 정보를 저장할 저장소가 필요한데, kops는 S3를 사용하므로 다음 명령어로 bucket을 생성하고 Versioning 기능도 활성화합니다.  </p><hr><p><code>~$ aws s3api create-bucket \</code><br><code>--bucket &lt;bucket name&gt; \</code><br><code>--region ap-northeast-2 \</code><br><code>--create-bucket-configuration LocationConstraint=ap-northeast-2</code></p><p><code>~$ aws s3api put-bucket-versioning \</code><br><code>--bucket &lt;bucket name&gt; \</code><br><code>--versioning-configuration Status=Enabled</code></p><hr><p><img src="https://user-images.githubusercontent.com/47657715/56706446-fad74500-674f-11e9-8d80-bee33bb67dc9.png" alt="S3 버킷 생성 01"></p><p><img src="https://user-images.githubusercontent.com/47657715/56706448-fc087200-674f-11e9-971d-16489148fb55.png" alt="S3 버킷 생성 02">  </p><h3 id="환경-변수-설정"><a href="#환경-변수-설정" class="headerlink" title="환경 변수 설정"></a>환경 변수 설정</h3><p>kops가 AWS API를 쓰기 위한 환경 변수를 설정합니다. </p><hr><p><code>~$ export AWS_ACCESS_KEY_ID=$(aws configure get aws_access_key_id)</code><br><code>~$ export AWS_SECRET_ACCESS_KEY=$(aws configure get aws_secret_access_key)</code></p><hr><p><img src="https://user-images.githubusercontent.com/47657715/56706497-29552000-6750-11e9-9952-53f623d5dc1b.png" alt="환경 변수 설정 01">  </p><p>작업을 편리하게 하기 위해 아래 환경 변수도 생성합니다. </p><p>Gossip 기반 클러스터를 사용할 계획이기 때문에 클러스터 이름은 .k8s.local로 입력합니다. (예: myfirstcluster.k8s.local)<br>bucket name에는 위의 S3 버킷 생성 과정에서 입력한 bucket name을 입력합니다.</p><p><img src="https://user-images.githubusercontent.com/47657715/56706513-35d97880-6750-11e9-9d77-8b5156e12996.png" alt="환경 변수 설정 02">  </p><h3 id="SSH-Key-Pair-생성"><a href="#SSH-Key-Pair-생성" class="headerlink" title="SSH Key Pair 생성"></a>SSH Key Pair 생성</h3><p>생성해둔 SSH Key Pair가 없다면 클러스터 생성을 시작하기 전에 ssh-keygen 을 통해 미리 생성해 둡니다.</p><hr><p><code>~$ ssh-keygen</code></p><hr><p><img src="https://user-images.githubusercontent.com/47657715/56706590-851fa900-6750-11e9-9a0a-e84582783097.png" alt="SSH Key Pair 생성">  </p><h3 id="클러스터-생성"><a href="#클러스터-생성" class="headerlink" title="클러스터 생성"></a>클러스터 생성</h3><p>다음 명령어를 이용하여 클러스터를 생성합니다. 클러스터를 생성한 Availability Zone을 지정해야 하는데 ap-northeast-2c (Seoul)만 지정합니다. </p><p>이 명령어를 입력하면 클러스터가 바로 생성되는 것은 아니고 생성을 위한 설정들이 만들어집니다.</p><hr><p><code>~$ kops create cluster --zones ap-northeast-2c ${NAME}</code></p><hr><p><img src="https://user-images.githubusercontent.com/47657715/56706660-c0ba7300-6750-11e9-887e-382ce80c33ab.png" alt><br>…<br><img src="https://user-images.githubusercontent.com/47657715/56706673-ce6ff880-6750-11e9-9d3a-0c3a9a879500.png" alt="클러스터 설정 생성">  </p><p>클러스터 설정을 확인하거나 수정하고 싶으면 다음 명령어를 입력합니다.  </p><hr><p><code>~$ kops edit cluster ${NAME}</code></p><hr><p>다음 명령어로 생성될 인스턴스 그룹을 확인할 수 있습니다.  </p><hr><p><code>~$ kops get ig --name ${NAME}</code></p><hr><p><img src="https://user-images.githubusercontent.com/47657715/56706758-168f1b00-6751-11e9-9d8c-950284d4bfe4.png" alt="인스턴스 그룹 확인">  </p><p>기본 설정은 c4.large 타입 마스터 노드 1개와 t2.medium 워커 노드 2개가 생성되게 되어있습니다. CATSLAB 서비스에 가동하기 위해 t2.medium 타입 마스터 노드 1개와 t2.medium 타입 워커 노드 2개를 생성합니다.  </p><p>다음 명령어를 통해 마스터 노드와 워커 노드의 설정을 변경합니다.  </p><hr><p><code>~$ kops edit ig master-ap-northeast-2c --name ${NAME}</code><br><code>~$ kops edit ig nodes --name ${NAME}</code></p><hr><p><img src="https://user-images.githubusercontent.com/47657715/56706793-3d4d5180-6751-11e9-9b11-5268a7e5746d.png" alt="인스턴스 그룹 설정 변경 01"></p><p><img src="https://user-images.githubusercontent.com/47657715/56706828-6241c480-6751-11e9-9830-3e259e861956.png" alt="인스턴스 그룹 설정 변경 02 - master node"></p><p><img src="https://user-images.githubusercontent.com/47657715/56706856-784f8500-6751-11e9-811b-36d9e890ddd7.png" alt="인스턴스 그룹 설정 변경 03 - worker node">  </p><p>생성할 클러스터의 설정을 변경한 후 다음 명령어를 통해 클러스터 생성합니다.  </p><hr><p><code>~$ kops update cluster ${NAME} --yes</code></p><hr><p><img src="https://user-images.githubusercontent.com/47657715/56706917-b2208b80-6751-11e9-9a15-d1215e4e946f.png" alt="클러스터 생성">  </p><p>클러스터 생성이 완료될 때까지는 어느 정도의 시간이 소요됩니다.</p><p>클러스터가 잘 생성되었는지 확인하기 위해 다음 명령어들을 이용하여 클러스터 상태를 확인합니다.</p><hr><p><code>~$ kops validate cluster            # 클러스터 상태 확인</code><br><code>~$ kubectl get nodes --show-labels  # 노드 목록 가져오기</code><br><code>~$ kubectl -n kube-system get po    # kube-system 네임스페이스 안의 Pod 목록</code></p><hr><p>인스턴스가 실행 중으로 바뀌고 노드들 간에 결합이 완료되면 다음과 같이 cluster가 잘 생성된 것을 확인할 수 있습니다.  </p><p><img src="https://user-images.githubusercontent.com/47657715/56706960-edbb5580-6751-11e9-8e38-a7ab1551da6c.png" alt="생성된 cluster 확인"></p><p><img src="https://user-images.githubusercontent.com/47657715/56706963-f1e77300-6751-11e9-8d5e-613a0ea1b0db.png" alt="생성된 node 확인"></p><p><img src="https://user-images.githubusercontent.com/47657715/56706990-0f1c4180-6752-11e9-939e-d38abdb9a0c7.png" alt="생성된 pod 확인">  </p><p><img src="https://user-images.githubusercontent.com/47657715/56707006-252a0200-6752-11e9-8629-7fb7d2b12307.png" alt="AWS 인스턴스 생성 확인">  </p><p>클러스터가 생성되면 다음과 같은 명령어로 생성한 마스터 노드에 접속이 가능합니다.  </p><hr><p><code>~$ ssh admin@[Master Node IP]</code></p><hr><h3 id="클러스터-삭제"><a href="#클러스터-삭제" class="headerlink" title="클러스터 삭제"></a>클러스터 삭제</h3><p>다음 명령어를 통해 클러스터를 삭제할 수 있습니다.  </p><hr><p><code>~$ kops delete cluster --name ${NAME} --yes</code></p><hr><p>kops를 이용하여 생성한 클러스터는 자동 복구(self-healing) 메커니즘으로 가동되기 때문에 구동 중인 노드가 다운되거나 삭제되더라도 자동으로 인스턴스를 교체해 줍니다. 그렇기 때문에 확실하게 클러스터의 가동을 중단시키기 위해서는 클러스터를 구성한 kops 마스터 노드에서 위의 명령어를 통해 클러스터를 삭제하는 것이 안전합니다.  </p><p>kops 설치 및 cluster를 생성한 master 노드 역시 다음 명령어를 통해 종료할 수 있습니다.  </p><hr><p><code>~$ sudo systemctl poweroff</code></p><hr>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Kops-이용하여-Cluster-생성하기&quot;&gt;&lt;a href=&quot;#Kops-이용하여-Cluster-생성하기&quot; class=&quot;headerlink&quot; title=&quot;Kops 이용하여 Cluster 생성하기&quot;&gt;&lt;/a&gt;Kops 이용하여 Cluster 생성
      
    
    </summary>
    
      <category term="Kubernetes" scheme="https://cantapiya.github.io/catslab_blog/categories/Kubernetes/"/>
    
      <category term="k8s Cluster on AWS with Kops" scheme="https://cantapiya.github.io/catslab_blog/categories/Kubernetes/k8s-Cluster-on-AWS-with-Kops/"/>
    
    
  </entry>
  
  <entry>
    <title>CATS Lab Package Installation</title>
    <link href="https://cantapiya.github.io/catslab_blog/catslab-package-installation/"/>
    <id>https://cantapiya.github.io/catslab_blog/catslab-package-installation/</id>
    <published>2019-04-25T22:00:00.000Z</published>
    <updated>2019-04-26T02:24:22.465Z</updated>
    
    <content type="html"><![CDATA[<h2 id="CATS-Lab-Package-설치"><a href="#CATS-Lab-Package-설치" class="headerlink" title="CATS Lab Package 설치"></a>CATS Lab Package 설치</h2><p>우선 CATS Lab 패키지를 설치하기 위해 <a href="https://git-scm.com/downloads" target="_blank" rel="noopener">Git Download</a>에서 Git을 다운로드합니다.</p><p><img src="https://user-images.githubusercontent.com/47657715/56722755-ab5e3c80-6782-11e9-980a-9f91bbea76e4.png" alt="Git 설치 완료">  </p><p><a href="https://github.com/Derek-tjhwang/CATS-LAB" target="_blank" rel="noopener">CATS Lab Github</a> 페이지에서 git clone을 이용하여 설치에 필요한 파일들을 내려받습니다.</p><hr><p><code>~$ git clone https://github.com/Derek-tjhwang/CATS-LAB.git</code></p><hr><p><img src="https://user-images.githubusercontent.com/47657715/56722802-c3ce5700-6782-11e9-93f0-5e94b15e03a7.png" alt="git clone [REPOSITORY]">  </p><p>CATS-LAB 디렉토리로 이동 후 다음 명령어를 실행시킵니다.<br>(python ver. 3.6.4과 pip, 그리고, 아래 명령어 실행을 위한 python package인 setuptools이 설치된 환경을 전제로 합니다.) </p><hr><p><code>~$ cd CATS-LAB</code><br><code>~$ python setup.py sdist</code></p><hr><p><img src="https://user-images.githubusercontent.com/47657715/56723358-c41b2200-6783-11e9-8f52-395d1ce103b2.png" alt>  </p><p>새로 생성된 dist 디렉토리로 이동 후 다음 명령어를 입력하여 CATS Lab package를 설치합니다.</p><hr><p><code>~$ cd dist</code><br><code>~$ pip install coza-0.2.tar.gz</code></p><hr><p><img src="https://user-images.githubusercontent.com/47657715/56723116-4d7e2480-6783-11e9-870e-7bfdfe618cd8.png" alt="CATS Lab Package 설치">  </p><h2 id="CATS-Lab-Sign-Up"><a href="#CATS-Lab-Sign-Up" class="headerlink" title="CATS Lab Sign Up"></a>CATS Lab Sign Up</h2><p>CATS Lab 패키지를 사용하기 위해서는 CATS Lab UUID와 사용할 BOT의 BOT ID가 필요합니다.</p><p>이를 발급받기 위해 우선 <a href="https://coza.me/home" target="_blank" rel="noopener">CATS Lab</a> 사이트에서 로그인 후 UUID와 BOT ID를 발급 받습니다.</p><h2 id="환경변수-설정"><a href="#환경변수-설정" class="headerlink" title="환경변수 설정"></a>환경변수 설정</h2><p>CATS Lab 패키지를 설치한 후 패키지에서 사용할 환경변수를 설정합니다. </p><p>필요한 환경변수로는 CATS Lab API Server의 Host와 Secret Key, 위의 과정에서 발급받은 UUID와 BOT ID입니다.</p><p>다음과 같이 환경변수를 등록 후 CATS Lab 패키지를 사용할 수 있습니다.</p><hr><p><code>export COZA_HOST=&quot;http://api.coza.me&quot;</code><br><code>export COZA_SECRET=SECRET_KEY</code><br><code>export COZA_USER_UUID=USER_UUID</code><br><code>export COZA_BOT_ID=BOT_ID</code></p><hr>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;CATS-Lab-Package-설치&quot;&gt;&lt;a href=&quot;#CATS-Lab-Package-설치&quot; class=&quot;headerlink&quot; title=&quot;CATS Lab Package 설치&quot;&gt;&lt;/a&gt;CATS Lab Package 설치&lt;/h2&gt;&lt;p&gt;우선
      
    
    </summary>
    
      <category term="CATS LAB" scheme="https://cantapiya.github.io/catslab_blog/categories/CATS-LAB/"/>
    
      <category term="Installation" scheme="https://cantapiya.github.io/catslab_blog/categories/CATS-LAB/Installation/"/>
    
    
  </entry>
  
  <entry>
    <title>A.0 Trade Basic</title>
    <link href="https://cantapiya.github.io/catslab_blog/catslab-trade-00-base-post/"/>
    <id>https://cantapiya.github.io/catslab_blog/catslab-trade-00-base-post/</id>
    <published>2019-02-26T00:00:00.000Z</published>
    <updated>2019-04-26T02:22:19.095Z</updated>
    
    <content type="html"><![CDATA[<h2 id="A-0-COZA-package-및-필요한-모듈-및-함수-import"><a href="#A-0-COZA-package-및-필요한-모듈-및-함수-import" class="headerlink" title="A.0. COZA package 및 필요한 모듈 및 함수 import"></a>A.0. COZA package 및 필요한 모듈 및 함수 import</h2><ul><li>필수</li></ul><p>BotContext 생성을 위해 import 합니다.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> coza.bot <span class="keyword">import</span> BotContext</span><br></pre></td></tr></table></figure><p>거래소에 주문을 넣기 위한 Order 객체를 import 합니다.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> coza.objects <span class="keyword">import</span> Order</span><br></pre></td></tr></table></figure><p>부가적으로 사용할 패키지 내의 객체나 함수 및 전략에서 이용할 TA들을 import 합니다.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> coza.ta <span class="keyword">import</span> (TA_NAME)</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;A-0-COZA-package-및-필요한-모듈-및-함수-import&quot;&gt;&lt;a href=&quot;#A-0-COZA-package-및-필요한-모듈-및-함수-import&quot; class=&quot;headerlink&quot; title=&quot;A.0. COZA package 
      
    
    </summary>
    
      <category term="CATS LAB" scheme="https://cantapiya.github.io/catslab_blog/categories/CATS-LAB/"/>
    
      <category term="Trade" scheme="https://cantapiya.github.io/catslab_blog/categories/CATS-LAB/Trade/"/>
    
    
  </entry>
  
  <entry>
    <title>A.1 BotContext의 생성</title>
    <link href="https://cantapiya.github.io/catslab_blog/catslab-trade-01-botcontext-post/"/>
    <id>https://cantapiya.github.io/catslab_blog/catslab-trade-01-botcontext-post/</id>
    <published>2019-02-25T23:00:00.000Z</published>
    <updated>2019-04-26T02:22:27.537Z</updated>
    
    <content type="html"><![CDATA[<h2 id="A-1-BotContext의-생성"><a href="#A-1-BotContext의-생성" class="headerlink" title="A.1. BotContext의 생성"></a>A.1. BotContext의 생성</h2><p>BOT_NAME을 지정하여 아래의 parameter를 입력하여 BotContext를 생성할 수 있습니다.<br>생성과 동시에 전략에서 사용할 가상화폐와 분봉들의 dataframe을 로드하여 저장합니다.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">BOT_NAME = BotContext(api_key, </span><br><span class="line">secret_key, </span><br><span class="line">init_budget, </span><br><span class="line">exchange, </span><br><span class="line">initialize, </span><br><span class="line">run_strategy, </span><br><span class="line">make_orders)</span><br></pre></td></tr></table></figure><p><strong>A.1.1. api_key (str)</strong><br>거래소로부터 발급 받은 사용자의 거래소 api key를 입력합니다.</p><p><strong>A.1.2. secret_key (str)</strong><br>거래소로부터 발급 받은 사용자의 거래소 secret key를 입력합니다.</p><p><strong>A.1.3. init_budget (int)</strong><br>사용자의 Bot에서 사용할 자산의 초기 투입 금액을 입력합니다.</p><p><strong>A.1.4. exchange (str)</strong><br>Bot에서 가상 화폐 거래를 할 때 이용할 거래소의 명칭을 입력합니다.<br>(해당 거래소에서 발급 받은 api key, secret key를 위의 입력 값으로 사용합니다.) </p><p><strong>A.1.5. initialize</strong><br>사용자가 Bot을 생성할 때 전략에서 사용할 가상화폐의 종류, 분봉, 거래소의 기축 화폐에 대한 정보와 safety setting에 대한 정보를 저장하는 함수입니다.</p><p>자세한 설명과 작성 예시는 A.3. initialize를 참고하시기 바랍니다.</p><p><strong>A.1.6. run_strategy</strong><br>Bot에서 사용하는 전략에서 매수 및 매도를 위해 참고할 기술적 지표를 계산하여 저장하는 함수입니다.  </p><p>자세한 설명과 작성 예시는 A.4. run_strategy를 참고하시기 바랍니다.</p><p><strong>A.1.7. make_orders</strong><br>사용자가 정한 방식에 따라 매수주문/매도주문/주문취소 등을 진행하는 함수입니다.  </p><p>자세한 설명과 작성 예시는 A.5. make_orders를 참고하시기 바랍니다.</p><p>dataframe에 접근하는 방식은 우선 BotContext를 생성할 때의 BOT_NAME class에서 exchanges로 접근하여 Bot에서 사용하는 거래소별 객체로 접근할 수 있습니다.<br>각 거래소에서 data로 접근하여 ‘{currency}_{interval}’ 형태의  key값으로 가상화폐 별, 분봉 별 dataframe에 접근이 가능합니다.</p><p>생성된 dataframe의 형태는 다음과 같습니다.</p><p><img src="https://user-images.githubusercontent.com/47657715/56643016-b8f8c100-66b3-11e9-992d-4ba72e3181a7.png" alt="A.1 DataFrame Example1"></p><p><img src="https://user-images.githubusercontent.com/47657715/56643020-bac28480-66b3-11e9-9c0b-e57081285884.png" alt="A.1 DataFrame Example2"></p><p><img src="https://user-images.githubusercontent.com/47657715/56643084-db8ada00-66b3-11e9-8f02-21c2f7cc6972.png" alt="A.1 DataFrame Example3"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;A-1-BotContext의-생성&quot;&gt;&lt;a href=&quot;#A-1-BotContext의-생성&quot; class=&quot;headerlink&quot; title=&quot;A.1. BotContext의 생성&quot;&gt;&lt;/a&gt;A.1. BotContext의 생성&lt;/h2&gt;&lt;p&gt;BOT_
      
    
    </summary>
    
      <category term="CATS LAB" scheme="https://cantapiya.github.io/catslab_blog/categories/CATS-LAB/"/>
    
      <category term="Trade" scheme="https://cantapiya.github.io/catslab_blog/categories/CATS-LAB/Trade/"/>
    
    
  </entry>
  
  <entry>
    <title>A.2 Trade 실행</title>
    <link href="https://cantapiya.github.io/catslab_blog/catslab-trade-02-run-post/"/>
    <id>https://cantapiya.github.io/catslab_blog/catslab-trade-02-run-post/</id>
    <published>2019-02-25T22:00:00.000Z</published>
    <updated>2019-04-26T02:22:32.007Z</updated>
    
    <content type="html"><![CDATA[<h2 id="A-2-Trade-실행"><a href="#A-2-Trade-실행" class="headerlink" title="A.2. Trade 실행"></a>A.2. Trade 실행</h2><p>BotContext로 지정한 BOT_NAME으로 context의 run 함수를 통해 Bot을 실행 시킬 수 있습니다.<br>(예: BOT_NAME.run())</p><p>Bot을 실행하게 되면 context를 생성할 때 입력한 정보들과 함수들을 이용하여, 1분 주기로 다음과 같은 과정을 반복합니다.</p><p><strong>A.2.1. 현금과 가상화폐 보유량을 업데이트</strong><br>make_orders에서 생성하여 거래소로 전송한 거래 주문의 거래 체결 여부와 취소 여부를 확인하여 자산의 보유 현황을 업데이트하는 과정을 진행합니다.</p><p><strong>A.2.2. 현재 자산의 현금가 추정치를 계산</strong><br>업데이트된 보유 자산을 이용하여 현재 자산들의 현금가격 추정치를 계산합니다.  </p><p><strong>A.2.3. initialize에서 입력한 safety setting의 조건을 만족하는지의 여부를 검사</strong><br>이전 단계에서 계산한 현금가의 추정치를 이용하여 사용자가 입력한 safety setting 조건의 만족 여부를 검사합니다. </p><p>이 단계에서 safety setting의 조건을 만족할 때, 사용자가 지정한 가동 중지의 여부에 따라 Bot의 가동을 중단 시키거나 계속해서 유지하게 됩니다.</p><p>아래의 과정은 Bot의 가동을 유지하는 경우에 진행됩니다.</p><p><strong>A.2.4. dataframe 업데이트</strong><br>사용자가 전략에 사용하기 위해 입력한 가상화폐와 분봉의 종류에 따라 dataframe 타입으로 캔들 데이터를 저장하는데, 1분 주기로 각 화폐와 각 분봉 별로 새롭게 캔들이 생성되었는지의 여부를 확인하여 dataframe을 업데이트 합니다.</p><p><strong>A.2.5. run_strategy 실행</strong><br>캔들 데이터 업데이트의 여부에 따라 전략에서 사용하는 지표를 업데이트 합니다. </p><p>새롭게 생성된 캔들 데이터가 존재하는 경우 업데이트 된 기점으로 새롭게 지표를 계산하여 저장합니다.</p><p><strong>A.2.6. make_orders 실행</strong><br>사용자가 지정한 과정을 거쳐 매수주문/매도주문/주문취소를 진행하는 함수를 실행합니다. </p><p>이 단계에서 생성한 매수주문/매도주문은 set_order 함수를 이용하여 주문내역에 저장하고, set_cancel 함수를 이용하여 기존에 전송한 주문에 대한 주문취소 요청을 진행합니다.</p><p><strong>A.2.7. 거래소 API를 이용하여 거래소로의 주문 요청</strong><br>이전 단계인 make_orders에서 생성한 주문들을 거래소 API를 사용하여 거래소로 주문 요청을 진행합니다. </p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;A-2-Trade-실행&quot;&gt;&lt;a href=&quot;#A-2-Trade-실행&quot; class=&quot;headerlink&quot; title=&quot;A.2. Trade 실행&quot;&gt;&lt;/a&gt;A.2. Trade 실행&lt;/h2&gt;&lt;p&gt;BotContext로 지정한 BOT_NAME으로 c
      
    
    </summary>
    
      <category term="CATS LAB" scheme="https://cantapiya.github.io/catslab_blog/categories/CATS-LAB/"/>
    
      <category term="Trade" scheme="https://cantapiya.github.io/catslab_blog/categories/CATS-LAB/Trade/"/>
    
    
  </entry>
  
  <entry>
    <title>A.3 Initialze의 작성 및 사용 예시</title>
    <link href="https://cantapiya.github.io/catslab_blog/catslab-trade-03-initialize-post/"/>
    <id>https://cantapiya.github.io/catslab_blog/catslab-trade-03-initialize-post/</id>
    <published>2019-02-25T21:00:00.000Z</published>
    <updated>2019-04-26T02:22:44.759Z</updated>
    
    <content type="html"><![CDATA[<p><strong>A.3. initialize 함수의 작성 및 사용 예시</strong><br>Initialize 함수의 작성 형식은 다음과 같은 형식을 갖으며,<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">initialize</span><span class="params">(self)</span>:</span></span><br><span class="line">self.context[‘trade_info’] = &#123;<span class="string">"EXCHANGE_NAME_1"</span>: &#123;</span><br><span class="line"><span class="string">"currency"</span>: [], </span><br><span class="line"><span class="string">"interval"</span>: [],</span><br><span class="line"><span class="string">"fiat"</span>: FIAT</span><br><span class="line">&#125;,</span><br><span class="line"><span class="string">"EXCHANGE_NAME_2"</span>: &#123;</span><br><span class="line"><span class="string">"currency"</span>: [],</span><br><span class="line"><span class="string">"interval"</span>: [],</span><br><span class="line"><span class="string">"fiat"</span>: FIAT</span><br><span class="line">&#125;,</span><br><span class="line">… , </span><br><span class="line"></span><br><span class="line"><span class="string">"safety_setting"</span>: &#123;</span><br><span class="line"><span class="string">"profit_target"</span>: &#123;</span><br><span class="line"><span class="string">"checked"</span>: bool,</span><br><span class="line"><span class="string">"ratio"</span>: RATIO</span><br><span class="line">&#125;,</span><br><span class="line"><span class="string">"stop_loss"</span>:&#123;</span><br><span class="line"><span class="string">"checked"</span>: bool,</span><br><span class="line"><span class="string">"ratio"</span>: RATIO</span><br><span class="line">&#125;,</span><br><span class="line"><span class="string">"stop_on_sell"</span>: bool,</span><br><span class="line"><span class="string">"trailing_stop"</span>: &#123;</span><br><span class="line"><span class="string">"checked"</span>: bool,</span><br><span class="line"><span class="string">"dec_ratio"</span>: RATIO,</span><br><span class="line"><span class="string">"inc_ratio"</span>: RATIO</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>실제로 작성한 예제는 다음과 같습니다.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">initialize</span><span class="params">(self)</span>:</span></span><br><span class="line">self.context[<span class="string">'trade_info'</span>] = &#123;<span class="string">"coinone"</span>: &#123;</span><br><span class="line"><span class="string">"currency"</span>: [<span class="string">"xrp"</span>],</span><br><span class="line"><span class="string">"interval"</span>: [<span class="number">1</span>],</span><br><span class="line"><span class="string">"fiat"</span>: <span class="string">"krw"</span></span><br><span class="line">&#125;,</span><br><span class="line">      <span class="string">"upbit"</span>: &#123;</span><br><span class="line"><span class="string">"currency"</span>: [<span class="string">"xrp"</span>],</span><br><span class="line"><span class="string">"interval"</span>: [<span class="number">1</span>],</span><br><span class="line"><span class="string">"fiat"</span>: <span class="string">"krw"</span></span><br><span class="line">&#125;, </span><br><span class="line"><span class="string">"safety_setting"</span>: &#123;</span><br><span class="line"><span class="string">"profit_target"</span>: &#123;</span><br><span class="line"><span class="string">"checked"</span>: <span class="literal">True</span>, </span><br><span class="line"><span class="string">"ratio"</span>: <span class="number">0.10</span>,</span><br><span class="line">&#125;, </span><br><span class="line"><span class="string">"stop_loss"</span>: &#123;</span><br><span class="line"><span class="string">"checked"</span>: <span class="literal">False</span>, </span><br><span class="line"><span class="string">"ratio"</span>: <span class="number">0.10</span></span><br><span class="line">&#125;, </span><br><span class="line"><span class="string">"stop_on_sell"</span>: <span class="literal">True</span>, </span><br><span class="line"><span class="string">"trailing_stop"</span>: &#123;</span><br><span class="line"><span class="string">"checked"</span>: <span class="literal">True</span>, </span><br><span class="line"><span class="string">"dec_ratio"</span>: <span class="number">0.05</span>,</span><br><span class="line"><span class="string">"inc_ratio"</span>: <span class="number">0.07</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>각각의 파라미터들은 다음과 같은 속성을 갖습니다.</p><p><strong>A.3.1. “EXCHANGE_NAME”: {“currency”: [], “interval”: [], “fiat”: FIAT}</strong><br>Bot에서 사용할 거래소의 명칭 EXCHANGE_NAME을 key로 하여, 해당 거래소에서 사용할 가상화폐(currency)의 종류, 분봉(interval)의 종류, 기축화폐(fiat)의 정보를 dictionary 타입으로 입력합니다. </p><p><strong>A.3.1.1. “currency”: []</strong><br>EXCHANGE_NAME을 key값으로 하는 dictionary에서 가상화폐의 종류에 대한 정보는 “currency”를 key, 사용할 가상화폐의 종류가 저장된 list를 value값으로 합니다.<br>(예: “currency”: [“btc”, “xrp”, “eth”])</p><p><strong>A.3.1.2. “interval”: []</strong><br>A.2.2와 마찬가지로 사용할 분봉에 대한 정보는 “interval”을 key, 사용할 분봉의 종류가 저장된 list를 value값으로 합니다.<br>(예: “interval”: [1, 5, 60])</p><p><strong>A.3.1.3. “fiat”: FIAT</strong><br>거래소에서 사용하는 기축화폐의 정보의 경우 “fiat”를 key값으로 하고, string 타입의 FIAT를 value값으로 가집니다.<br>(예: “fiat”: “krw” 또는 “fiat”: “usd”)</p><p><strong>A.3.2. “safety_setting”: {“profit_target”:{}, “stop_loss”:{}, “stop_on_sell”:bool, “trailing_stop”:{}}</strong><br>Bot에서 사용할 safety setting에 대한 정보 역시 “safety_setting”을 key값으로 하는 dictionary 타입으로 입력합니다. </p><p><strong>A.3.2.1. “profit_target”: {“checked”: bool, “ratio”: RATIO}</strong><br>Bot에서 사용할 익절 조건(“profit_target”)으로, 초기 투입 금액의 입력한 RATIO 이상으로 수익이 발생했을 시에 자동으로 Bot을 중단시키는 조건입니다. </p><p>이 기능을 사용할 것인지에 대한 여부를 “checked”를 key값, bool 타입의 value값으로 입력하고, 익절 조건의 비율을 float 타입의 RATIO (0&lt;=RATIO&lt;=1)로 입력합니다.</p><p><strong>A.3.2.2. “stop_loss”: {“checked”: bool, “ratio”: RATIO}</strong><br>Bot에서 사용할 손절 조건(“stop_loss”)으로, 초기 투입 금액의 입력한 RATIO 이하으로 손해가 발생했을 시에 자동으로 Bot을 중단시키는 조건입니다. </p><p>이 기능을 사용할 것인지에 대한 여부를 “checked”를 key값, bool 타입의 value값으로 입력하고, 손절 조건의 비율을 float 타입의 RATIO (0&lt;=RATIO&lt;=1)로 입력합니다.</p><p><strong>A.3.2.3. “stop_on_sell”: bool</strong><br>safety setting의 조건을 만족하여 거래를 중단할 경우 보유하고 있던 가상화폐들을 청산할 것인지에 대한 여부를 “stop_on_sell”를 key값으로하여 bool 타입의 value를 입력합니다. </p><p><strong>A.3.2.4. “trailing_stop”: {“checked”: bool, “dec_ratio”: RATIO, “inc_ratio”: RATIO}</strong><br>Bot을 가동중에 입력한 RATIO(“inc_ratio”) 이상 수익이 발생한 경우, 이후 거래에서 “dec_ratio” 이하로 하락했을 시 Bot 가동을 중단시키는 기능입니다. </p><p>기능의 사용 여부를 “checked”를 key값, bool 타입의 value값으로 입력하고, 기능이 발동되는 기준인 상승 조건을 “inc_ratio”의 key값과 float 타입의 RATIO (0&lt;=RATIO&lt;=1)로 입력합니다. 상승 이후 하락 조건을 “dec_ratio”의 key값과 float 타입의 RATIO (0&lt;=RATIO&lt;=1)로 입력합니다. </p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;strong&gt;A.3. initialize 함수의 작성 및 사용 예시&lt;/strong&gt;&lt;br&gt;Initialize 함수의 작성 형식은 다음과 같은 형식을 갖으며,&lt;br&gt;&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;
      
    
    </summary>
    
      <category term="CATS LAB" scheme="https://cantapiya.github.io/catslab_blog/categories/CATS-LAB/"/>
    
      <category term="Trade" scheme="https://cantapiya.github.io/catslab_blog/categories/CATS-LAB/Trade/"/>
    
    
  </entry>
  
  <entry>
    <title>A.4 run_strategy 함수 작성 및 예시</title>
    <link href="https://cantapiya.github.io/catslab_blog/catslab-trade-04-run-strategy-post/"/>
    <id>https://cantapiya.github.io/catslab_blog/catslab-trade-04-run-strategy-post/</id>
    <published>2019-02-25T20:00:00.000Z</published>
    <updated>2019-04-26T02:22:56.170Z</updated>
    
    <content type="html"><![CDATA[<h2 id="A-4-run-strategy-함수의-작성-및-사용-예시"><a href="#A-4-run-strategy-함수의-작성-및-사용-예시" class="headerlink" title="A.4. run_strategy 함수의 작성 및 사용 예시"></a>A.4. run_strategy 함수의 작성 및 사용 예시</h2><p>1분 주기로 업데이트 되는 dataframe을 이용하여 사용자가 전략에서 사용하는 기술적 지표 및 매수/매도의 근거가 되는 전략을 계산하고 업데이트하는 함수입니다.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">run_strategy</span><span class="params">(self, is_update, trade_info, update_len, data)</span>:</span></span><br></pre></td></tr></table></figure><p><strong>A.4.1. is_update (dict)</strong><br>is_update parameter는 가상화폐와 분봉의 종류에 따라 “{currency}_{interval}” 형태의 key값과, 해당 분봉의 update 여부에 따라 bool 타입의 value값을 갖습니다. </p><p>예를 들어, 1분을 주기로 Trade 함수(A.2. 참고)가 진행될 때, 1분마다 생성되는 1분봉의 경우 매분 새롭게 캔들 데이터가 생성되어 dataframe 업데이트가 진행됩니다. </p><p>이외의 분봉들은 해당 분봉이 생성되고 나서 dataframe 업데이트의 여부에 따라 bool 타입의 value값이 is_update에 저장됩니다.</p><p><strong>A.4.2. trade_info (dict)</strong><br>전략에서 사용하는 거래소, 가상화폐, 분봉의 종류 및 safety setting에 대한 정보를 저장하고 있는 parameter입니다. 초기에 BotContext를 생성할 때 initialize(A.3. 참고)에서 입력한 정보들과 같습니다.</p><p><strong>A.4.3. update_len (dict)</strong><br>각각의 가상화폐와 분봉에 따라 1분 주기로 dataframe의 업데이트 여부를 is_update에 저장하는 것과 동시에 업데이트 된 캔들 데이터의 개수가 update_len에 저장됩니다. </p><p>is_update와 마찬가지로 “{currency}_{interval}” 형태의 key값을 가지고, 업데이트 된 캔들 데이터의 개수를 value값으로 가집니다. </p><p>이 parameter는 실제 거래소에서 캔들 데이터가 생성되더라도 크롤링이나 거래소 API를 이용하여 데이터를 호출하는 과정에서 업데이트 되어야할 캔들 데이터가 누락 또는 지연이 되거나, 거래소 점검으로 인해 업데이트 되는 캔들 데이터가 없는 경우를 구분하기 위해 사용합니다.</p><p><strong>A.4.4. data (dict)</strong><br>전략에서 사용하기 위해 입력한 가상화폐의 종류와 분봉의 종류에 따라 “{currency}_{interval}” 형태의 key값과 dataframe을 value값으로 갖는 dictionary입니다. </p><p>각 dataframe에는 해당 가상화폐와 분봉의 캔들 데이터 및 전략에서 사용되는 기술적 지표들이 저장되어 있습니다. </p><p>또한, 각 분봉마다 가지고 있는 default 개수만큼을 가장 최근에 업데이트 된 캔들 데이터까지 저장하고 있습니다. </p><p>각 분봉의 default 개수는 다음과 같습니다.<br>1분봉         : 10080개 (1주일)<br>3분봉         : 3360개 (1주일)<br>5분봉         : 8640개 (1개월)<br>15분봉        : 2880개 (1개월)<br>30분봉        : 1440개 (1개월)<br>60분봉        : 2160개 (3개월)<br>120분봉    : 1080개 (3개월)<br>240분봉    : 540개 (3개월)<br>1440분봉    : 365개 (1년)</p><p>run_strategy 함수의 사용 예시는 5일 이동평균선과 20일 이동평균선을 사용하는 전략으로 다음과 같습니다.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> coza.ta <span class="keyword">import</span> candle_slicing</span><br><span class="line"><span class="keyword">from</span> coza.ta <span class="keyword">import</span> ema</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">run_strategy</span><span class="params">(self, is_update, trade_info, update_len, data)</span>:</span></span><br><span class="line">    exchange = self.exchange</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> currency <span class="keyword">in</span> trade_info[exchange][<span class="string">'currency'</span>]:</span><br><span class="line">        <span class="keyword">for</span> interval <span class="keyword">in</span> trade_info[exchange][<span class="string">'interval'</span>]:</span><br><span class="line">            <span class="keyword">if</span> int(interval) == <span class="number">1</span>:</span><br><span class="line">                <span class="keyword">if</span> len(is_update.keys()) != <span class="number">0</span>:</span><br><span class="line">                    update_number = update_len[<span class="string">f'<span class="subst">&#123;currency&#125;</span>_<span class="subst">&#123;int(interval)&#125;</span>'</span>]</span><br><span class="line"></span><br><span class="line">                    update_candle_20 = \</span><br><span class="line">                    candle_slicing(df=df, n=<span class="number">20</span>, update_number=update_number)</span><br><span class="line">                    update_candle_60 = \</span><br><span class="line">                    candle_slicing(df=df, n=<span class="number">60</span>, update_number=update_number)</span><br><span class="line"></span><br><span class="line">                    update_ema_20 = \</span><br><span class="line">                    ema(update_candle_20[<span class="string">'close'</span>], <span class="number">20</span>).tail(update_number)</span><br><span class="line">                    update_ema_60 = \</span><br><span class="line">                    ema(update_candle_60[<span class="string">'close'</span>], <span class="number">60</span>).tail(update_number)</span><br><span class="line">                    </span><br><span class="line">                    <span class="keyword">if</span> update_number &gt;= <span class="number">1</span>:</span><br><span class="line">                        start_index_20 = update_ema_20.index[<span class="number">0</span>]</span><br><span class="line">                        start_index_60 = update_ema_60.index[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">                        <span class="keyword">for</span> index <span class="keyword">in</span> range(update_number):</span><br><span class="line">                            data[<span class="string">f'<span class="subst">&#123;currency&#125;</span>_<span class="subst">&#123;int(interval)&#125;</span>'</span>].set_value(start_index+timedelta(days=index), <span class="string">'ema_20'</span>, update_ema_20.loc[start_index+timedelta(days=index)])</span><br><span class="line">                            data[<span class="string">f'<span class="subst">&#123;currency&#125;</span>_<span class="subst">&#123;int(interval)&#125;</span>'</span>].set_value(start_index+timedelta(days=index), <span class="string">'ema_60'</span>, update_ema_60.loc[start_index+timedelta(days=index)])</span><br><span class="line">                        </span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    data[<span class="string">f'<span class="subst">&#123;currency&#125;</span>_<span class="subst">&#123;int(interval)&#125;</span>'</span>][<span class="string">'ema_20'</span>] = \</span><br><span class="line">                    ema(data[<span class="string">f'<span class="subst">&#123;currency&#125;</span>_<span class="subst">&#123;int(interval)&#125;</span>'</span>][<span class="string">'close'</span>], <span class="number">20</span>)</span><br><span class="line">                    data[<span class="string">f'<span class="subst">&#123;currency&#125;</span>_<span class="subst">&#123;int(interval)&#125;</span>'</span>][<span class="string">'ema_60'</span>] = \</span><br><span class="line">                    ema(data[<span class="string">f'<span class="subst">&#123;currency&#125;</span>_<span class="subst">&#123;int(interval)&#125;</span>'</span>][<span class="string">'close'</span>], <span class="number">60</span>)</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;A-4-run-strategy-함수의-작성-및-사용-예시&quot;&gt;&lt;a href=&quot;#A-4-run-strategy-함수의-작성-및-사용-예시&quot; class=&quot;headerlink&quot; title=&quot;A.4. run_strategy 함수의 작성 및 사용 
      
    
    </summary>
    
      <category term="CATS LAB" scheme="https://cantapiya.github.io/catslab_blog/categories/CATS-LAB/"/>
    
      <category term="Trade" scheme="https://cantapiya.github.io/catslab_blog/categories/CATS-LAB/Trade/"/>
    
    
  </entry>
  
  <entry>
    <title>A.5 make_orders 함수의 작성 및 예시</title>
    <link href="https://cantapiya.github.io/catslab_blog/catslab-trade-05-make-orders-post/"/>
    <id>https://cantapiya.github.io/catslab_blog/catslab-trade-05-make-orders-post/</id>
    <published>2019-02-25T19:00:00.000Z</published>
    <updated>2019-04-26T02:23:00.475Z</updated>
    
    <content type="html"><![CDATA[<h2 id="A-5-make-orders-함수의-작성-및-예시"><a href="#A-5-make-orders-함수의-작성-및-예시" class="headerlink" title="A.5. make_orders 함수의 작성 및 예시"></a>A.5. make_orders 함수의 작성 및 예시</h2><p>전략에서 사용하는 매수/매도 방식에 따라 매수주문/매도주문/주문취소를 진행합니다. </p><p>주문을 생성할 때는 Order 객체를 이용하여 생성하고, 생성한 주문들은 set_order 함수를 이용하여 주문 내역에 저장합니다. </p><p>주문 내역에 있는 주문들은 거래소 API를 이용하는 내부 함수를 사용하여 거래소로 전송됩니다. 주문 취소의 경우 set_cancel을 통해 거래소로 전송이 가능합니다.</p><p>주문을 생성하는 Order 객체 생성은 A.6.을 참고하시고, 생성한 주문을 거래소에 전송하기 위해 list에 추가하는 set_order 함수는 A.7.을 참고하시기 바랍니다. 또한, 체결 이전의 주문들의 정보를 저장하고 있는 order_list에 대한 내용은 A.8.에서, 주문 취소를 요청하는 set_cancel 함수에 대한 설명과 사용 방법은 A.9.을 참고하시기 바랍니다.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">make_orders</span><span class="params">(self, is_update, trade_info, update_len, data)</span>:</span></span><br></pre></td></tr></table></figure><p><strong>A.5.1. is_update (dict)</strong><br>run_strategy 함수의 parameter와 동일합니다.</p><p><strong>A.5.2. trade_info (dict)</strong><br>run_strategy 함수의 parameter와 동일합니다.</p><p><strong>A.5.3. update_len (dict)</strong><br>run_strategy 함수의 parameter와 동일합니다.</p><p><strong>A.5.4. data (dict)</strong><br>run_strategy 함수의 parameter와 동일합니다.</p><p>make_orders 함수의 사용 예시는 다음과 같습니다.</p><p>다음 예시는 위의 run_strategy를 기반으로 5일 이동평균선이 20일 이동평균선을 상향 돌파하는 순간 매수, 하향 돌파하는 순간 매도하는 전략입니다.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">make_orders</span><span class="params">(self, is_update, trade_info, update_len, data)</span>:</span></span><br><span class="line">    exchange = self.exchange</span><br><span class="line">    interval = <span class="number">1</span></span><br><span class="line">    </span><br><span class="line">    total_fiat = self.exchanges[exchange].balance[<span class="string">'fiat'</span>]</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> currency <span class="keyword">in</span> trade_info[exchange][<span class="string">'currency'</span>]:</span><br><span class="line">        current_index = data[<span class="string">f'<span class="subst">&#123;currency&#125;</span>_<span class="subst">&#123;int(interval)&#125;</span>'</span>].index[<span class="number">-1</span>]</span><br><span class="line">        t = current_index</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> data[<span class="string">f'<span class="subst">&#123;currency&#125;</span>_<span class="subst">&#123;int(interval)&#125;</span>'</span>][<span class="string">'ema_20'</span>].loc[current_index-timedelta(seconds=<span class="number">60</span>)] \</span><br><span class="line">        &lt; data[<span class="string">f'<span class="subst">&#123;currency&#125;</span>_<span class="subst">&#123;int(interval)&#125;</span>'</span>][<span class="string">'ema_60'</span>].loc[current_index-timedelta(seconds=<span class="number">60</span>)] \</span><br><span class="line">        <span class="keyword">and</span> data[<span class="string">f'<span class="subst">&#123;currency&#125;</span>_<span class="subst">&#123;int(interval)&#125;</span>'</span>][<span class="string">'ema_20'</span>].loc[current_index] \</span><br><span class="line">        &gt; data[<span class="string">f'<span class="subst">&#123;currency&#125;</span>_<span class="subst">&#123;int(interval)&#125;</span>'</span>][<span class="string">'ema_60'</span>].loc[current_index]:</span><br><span class="line">            order_type = <span class="string">'BUY'</span></span><br><span class="line">            price = data[<span class="string">f'<span class="subst">&#123;currency&#125;</span>_<span class="subst">&#123;int(interval)&#125;</span>'</span>][<span class="string">'close'</span>].loc[current_index]</span><br><span class="line">            quantity = math.floor( round (total_fiat*<span class="number">0.5</span> / price * <span class="number">10</span>**<span class="number">4</span>, <span class="number">4</span>) )/(<span class="number">10</span>**<span class="number">4</span>)</span><br><span class="line">            <span class="keyword">if</span> quantity &gt;= <span class="number">1.0</span> <span class="keyword">and</span> price * quantity &lt;= self.exchanges[exchange].balance[<span class="string">'fiat'</span>]:</span><br><span class="line">                o = Order(exchange=exchange, currency=currency, order_type=order_type, fiat=<span class="string">'krw'</span>, price=price, quantity=quantity)</span><br><span class="line">                self.set_order(exchange=exchange, o=o, t=t)</span><br><span class="line">                </span><br><span class="line">        <span class="keyword">elif</span> data[<span class="string">f'<span class="subst">&#123;currency&#125;</span>_<span class="subst">&#123;int(interval)&#125;</span>'</span>][<span class="string">'ema_20'</span>].loc[current_index-timedelta(seconds=<span class="number">60</span>)] \</span><br><span class="line">        &gt; data[<span class="string">f'<span class="subst">&#123;currency&#125;</span>_<span class="subst">&#123;int(interval)&#125;</span>'</span>][<span class="string">'ema_60'</span>].loc[current_index-timedelta(seconds=<span class="number">60</span>)] \</span><br><span class="line">        <span class="keyword">and</span> data[<span class="string">f'<span class="subst">&#123;currency&#125;</span>_<span class="subst">&#123;int(interval)&#125;</span>'</span>][<span class="string">'ema_20'</span>].loc[current_index] \</span><br><span class="line">        &lt; data[<span class="string">f'<span class="subst">&#123;currency&#125;</span>_<span class="subst">&#123;int(interval)&#125;</span>'</span>][<span class="string">'ema_60'</span>].loc[current_index]:</span><br><span class="line">            order_type = <span class="string">'SELL'</span></span><br><span class="line">            price = data[<span class="string">f'<span class="subst">&#123;currency&#125;</span>_<span class="subst">&#123;int(interval)&#125;</span>'</span>][<span class="string">'close'</span>].loc[current_index]</span><br><span class="line">            quantity = math.floor(round(self.exchanges[exchange].balance[currency][<span class="string">'avail'</span>] * <span class="number">10</span>**<span class="number">4</span>, <span class="number">4</span>))/(<span class="number">10</span>**<span class="number">4</span>)</span><br><span class="line">            <span class="keyword">if</span> quantity &gt;= <span class="number">1.0</span>:</span><br><span class="line">                o = Order(exchange=exchange, currency=currency, order_type=order_type, fiat=<span class="string">'krw'</span>, price=price, quantity=quantity)</span><br><span class="line">                self.set_order(exchange=exchange, o=o, t=t)</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;A-5-make-orders-함수의-작성-및-예시&quot;&gt;&lt;a href=&quot;#A-5-make-orders-함수의-작성-및-예시&quot; class=&quot;headerlink&quot; title=&quot;A.5. make_orders 함수의 작성 및 예시&quot;&gt;&lt;/a&gt;A.5.
      
    
    </summary>
    
      <category term="CATS LAB" scheme="https://cantapiya.github.io/catslab_blog/categories/CATS-LAB/"/>
    
      <category term="Trade" scheme="https://cantapiya.github.io/catslab_blog/categories/CATS-LAB/Trade/"/>
    
    
  </entry>
  
  <entry>
    <title>A.6 Order 객체 생성 및 사용 예시</title>
    <link href="https://cantapiya.github.io/catslab_blog/catslab-trade-06-order-post/"/>
    <id>https://cantapiya.github.io/catslab_blog/catslab-trade-06-order-post/</id>
    <published>2019-02-25T18:00:00.000Z</published>
    <updated>2019-04-26T02:23:04.223Z</updated>
    
    <content type="html"><![CDATA[<h2 id="A-6-Order-객체-생성-및-사용-예시"><a href="#A-6-Order-객체-생성-및-사용-예시" class="headerlink" title="A.6. Order 객체 생성 및 사용 예시"></a>A.6. Order 객체 생성 및 사용 예시</h2><p>거래소에 주문을 전송하기 전에 Order 객체를 생성하여 list에 저장을 한 뒤, 거래소 API를 이용하는 함수를 사용하여 list에 저장되어 있는 주문들을 한 번에 처리합니다.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Order</span><span class="params">(exchange, currency, order_type, quantity, price, fiat)</span>:</span></span><br></pre></td></tr></table></figure><p><strong>A.6.1. exchange (str)</strong><br>주문할 거래소의 명칭을 입력합니다.<br>(예: ‘coinone’, ‘upbit’)</p><p><strong>A.6.2. currency (str)</strong><br>거래소에 주문을 넣을 가상 화폐의 명칭을 입력합니다.<br>(예: “btc”, “eth”, “xrp”, … )</p><p><strong>A.6.3. order_type (str)</strong><br>매수와 매도를 구분하기 위한 parameter입니다.<br>매수 주문의 경우 “BUY”, 매도 주문의 경우 “SELL” 타입으로 입력합니다.</p><p><strong>A.6.4. quantity (float)</strong><br>주문할 가상화폐의 수량을 입력합니다.</p><p><strong>A.6.5. price (int)</strong><br>주문할 가상화폐의 가격을 입력합니다.</p><p><strong>A.6.6. fiat (str)</strong><br>거래소에서 사용하는 기축화폐를 입력합니다.<br>(예: “krw”, “usd”, … )</p><p>Order 객체의 사용 예시는 다음과 같습니다.</p><p>매수주문 (현재 가격으로 주문): </p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> coza.objects <span class="keyword">import</span> Order</span><br><span class="line"></span><br><span class="line">price = data[<span class="string">f'<span class="subst">&#123;currency]_&#123;int(interval)&#125;</span>'</span>][<span class="string">'close'</span>].loc[data[<span class="string">f'<span class="subst">&#123;currency]_&#123;int(interval)&#125;</span>'</span>].index[<span class="number">-1</span>]]</span><br><span class="line">buy_order = Order(exchange=<span class="string">'coinone'</span>, currency=<span class="string">'xrp'</span>, order_type=<span class="string">'BUY'</span>, fiat=<span class="string">'krw'</span>, price=price, quantity=<span class="number">2.5</span>)</span><br></pre></td></tr></table></figure><p>매도주문 (지정가 주문):<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> coza.objects <span class="keyword">import</span> Order</span><br><span class="line"></span><br><span class="line">sell_order = Order(exchange=<span class="string">'upbit'</span>, currency=<span class="string">'eth'</span>, order_type=<span class="string">'SELL'</span>, fiat=<span class="string">'krw'</span>, price=<span class="number">150000</span>, quantity=<span class="number">0.1</span>)</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;A-6-Order-객체-생성-및-사용-예시&quot;&gt;&lt;a href=&quot;#A-6-Order-객체-생성-및-사용-예시&quot; class=&quot;headerlink&quot; title=&quot;A.6. Order 객체 생성 및 사용 예시&quot;&gt;&lt;/a&gt;A.6. Order 객체 생성
      
    
    </summary>
    
      <category term="CATS LAB" scheme="https://cantapiya.github.io/catslab_blog/categories/CATS-LAB/"/>
    
      <category term="Trade" scheme="https://cantapiya.github.io/catslab_blog/categories/CATS-LAB/Trade/"/>
    
    
  </entry>
  
  <entry>
    <title>A.7 set_order 함수의 사용과 예시</title>
    <link href="https://cantapiya.github.io/catslab_blog/catslab-trade-07-set-order-post/"/>
    <id>https://cantapiya.github.io/catslab_blog/catslab-trade-07-set-order-post/</id>
    <published>2019-02-25T17:00:00.000Z</published>
    <updated>2019-04-26T02:23:08.052Z</updated>
    
    <content type="html"><![CDATA[<h2 id="A-7-set-order-함수의-사용과-사용과-예시"><a href="#A-7-set-order-함수의-사용과-사용과-예시" class="headerlink" title="A.7. set_order 함수의 사용과 사용과 예시"></a>A.7. set_order 함수의 사용과 사용과 예시</h2><p>Order 객체를 이용하여 생성한 주문들을 거래소 API를 이용하여 거래소에 전송을 하기 위한 함수입니다. </p><p>주문내역에 대한 정보를 저장하는 Order 객체와, 주문 시간을 지정하여 list에 추가한 뒤, 내부 함수를 이용하여 list 저장되어 있는 주문을 거래소로 전송을 합니다. </p><p>거래소로 전송함과 동시에 자산의 보유량을 업데이트하여 변경된 정보를 저장합니다. 보유 자산을 업데이트할 때는 수수료를 고려하여 적용이 됩니다.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">set_order</span><span class="params">(self, exchange, o, t=None)</span>:</span></span><br></pre></td></tr></table></figure><p><strong>A.7.1. exchange (str)</strong><br>Bot에서 사용하는 거래소의 명칭을 입력합니다.</p><p><strong>A.7.2. o (object)</strong><br>make_orders에서 Order 객체를 사용하여 생성하며, 주문할 가상화폐의 종류, 주문 유형, 주문 수량, 주문 가격, 거래소에서 사용하는 기축화폐에 대한 정보를 포함합니다.</p><p><strong>A.7.3. t (datetime.datetime)</strong><br>주문을 요청하는 시간을 입력합니다. 별도로 지정하지 않는 경우 현재시간을 이용하여 주문 시간이 정해집니다.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> coza.objects <span class="keyword">import</span> Order</span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line"><span class="comment"># 현재 시간으로 주문</span></span><br><span class="line">price = data[<span class="string">f'<span class="subst">&#123;currency]_&#123;int(interval)&#125;</span>'</span>][<span class="string">'close'</span>].loc[data[<span class="string">f'<span class="subst">&#123;currency]_&#123;int(interval)&#125;</span>'</span>].index[<span class="number">-1</span>]]</span><br><span class="line">buy_order = Order(exchange=<span class="string">'coinone'</span>, currency=<span class="string">'xrp'</span>, order_type=<span class="string">'BUY'</span>, fiat=<span class="string">'krw'</span>, price=price, quantity=<span class="number">2.75</span>)</span><br><span class="line">order_time = datetime.now()</span><br><span class="line">set_order(exchange=<span class="string">'coinone'</span>, o=buy_order, t=order_time)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 주문 신호가 들어온 캔들의 시간으로 주문</span></span><br><span class="line">sell_order = Order(exchange=<span class="string">'upbit'</span>, currency=<span class="string">'eth'</span>, order_type=<span class="string">'SELL'</span>, fiat=<span class="string">'krw'</span>, price=<span class="number">175000</span>, quantity=<span class="number">0.1</span>)</span><br><span class="line">t = data[<span class="string">f'<span class="subst">&#123;currency]_&#123;int(interval)&#125;</span>'</span>].index[<span class="number">-1</span>]</span><br><span class="line">set_order(exchange=<span class="string">'upbit'</span>, o=sell_order, t=t)</span><br></pre></td></tr></table></figure><p><img src="https://user-images.githubusercontent.com/47657715/56643701-14777e80-66b5-11e9-91ce-d43aafaf4172.png" alt="A.7 Order 객체 Example1"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;A-7-set-order-함수의-사용과-사용과-예시&quot;&gt;&lt;a href=&quot;#A-7-set-order-함수의-사용과-사용과-예시&quot; class=&quot;headerlink&quot; title=&quot;A.7. set_order 함수의 사용과 사용과 예시&quot;&gt;&lt;/a&gt;A
      
    
    </summary>
    
      <category term="CATS LAB" scheme="https://cantapiya.github.io/catslab_blog/categories/CATS-LAB/"/>
    
      <category term="Trade" scheme="https://cantapiya.github.io/catslab_blog/categories/CATS-LAB/Trade/"/>
    
    
  </entry>
  
  <entry>
    <title>A.8 Order_list</title>
    <link href="https://cantapiya.github.io/catslab_blog/catslab-trade-08-order-list-post/"/>
    <id>https://cantapiya.github.io/catslab_blog/catslab-trade-08-order-list-post/</id>
    <published>2019-02-25T16:00:00.000Z</published>
    <updated>2019-04-26T02:23:11.624Z</updated>
    
    <content type="html"><![CDATA[<h2 id="A-8-order-list"><a href="#A-8-order-list" class="headerlink" title="A.8. order_list"></a>A.8. order_list</h2><p>Order 객체를 이용하여 생성된 주문은 내부 함수를 거쳐 거래소로 전송된 뒤에 BotContext의 exchanges 내부 order_list에 저장됩니다. </p><p>order_list는 가상화폐 종류를 key값으로 한 dictionary 내부에 다시 order_id를 key값으로하고 해당 order_id의 주문 정보를 포함하는 Order 객체를 value값으로 하는 dictionary로 형태로 관리됩니다. </p><p>주문한 수량의 전체가 체결이 되거나, 전체가 취소될 경우 order_list에서 제거가 되며, 자산의 업데이트가 진행됩니다. 부분 체결 및 부분 취소가 발생한 경우에도 자산의 업데이트가 진행되며, 미체결 수량이 존재하는 경우에는 remain_qty에 그 수량을 저장합니다. </p><p>order_list에 대한 예시는 다음과 같습니다. coinone_bot이라는 BotContext에 저장되어 있는 order_list로, ‘iota’와 ‘xrp’에 관련된 미체결 주문 정보가 저장되어 있는 것을 볼 수 있습니다. </p><p><img src="https://user-images.githubusercontent.com/47657715/56647672-ce261d80-66bc-11e9-913a-a99fe66470b1.png" alt="A.8 order_list Example1"></p><p>Order 객체에 저장된 주문 정보들은 다음과 같습니다.</p><p><strong>A.8.1. currency</strong><br>주문한 가상화폐의 명칭을 저장합니다.</p><p><strong>A.8.2. fee</strong><br>주문한 수량을 기준으로 계산한 수수료에 대한 정보입니다. ‘order_type’이 ‘SELL’인 경우 ‘fee’에 저장된 값은 Bot에서 사용하는 거래소의 기축화폐에 해당합니다. </p><p><strong>A.8.3. fiat</strong><br>Bot에서 사용하는 거래소의 기축화폐의 정보입니다.</p><p><strong>A.8.4. order_type</strong><br>매수 주문인지 매도 주문인지 구분하는 역할을 합니다.</p><p><strong>A.8.5. price</strong><br>주문 가격에 대한 정보입니다.</p><p><strong>A.8.6. quantity</strong><br>주문한 수량에 대한 정보입니다.</p><p><strong>A.8.7. remain_qty</strong><br>주문한 수량에서 부분 체결이나 부분 취소가 발생하고 난 뒤의 미체결 된 주문 수량에 대한 정보입니다.</p><p><strong>A.8.8. timestamp</strong><br>주문한 시간의 timestamp값에 대한 정보입니다.</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;A-8-order-list&quot;&gt;&lt;a href=&quot;#A-8-order-list&quot; class=&quot;headerlink&quot; title=&quot;A.8. order_list&quot;&gt;&lt;/a&gt;A.8. order_list&lt;/h2&gt;&lt;p&gt;Order 객체를 이용하여 생성된 주
      
    
    </summary>
    
      <category term="CATS LAB" scheme="https://cantapiya.github.io/catslab_blog/categories/CATS-LAB/"/>
    
      <category term="Trade" scheme="https://cantapiya.github.io/catslab_blog/categories/CATS-LAB/Trade/"/>
    
    
  </entry>
  
  <entry>
    <title>A.9 set_cancel 함수의 사용과 사용 예시</title>
    <link href="https://cantapiya.github.io/catslab_blog/catslab-trade-09-set-cancel-post/"/>
    <id>https://cantapiya.github.io/catslab_blog/catslab-trade-09-set-cancel-post/</id>
    <published>2019-02-25T15:00:00.000Z</published>
    <updated>2019-04-26T02:23:15.942Z</updated>
    
    <content type="html"><![CDATA[<h2 id="A-9-set-cancel-함수의-사용과-사용-예시"><a href="#A-9-set-cancel-함수의-사용과-사용-예시" class="headerlink" title="A.9. set_cancel 함수의 사용과 사용 예시"></a>A.9. set_cancel 함수의 사용과 사용 예시</h2><p>거래소에 전송한 주문 중 미체결 주문들을 취소할 때 사용할 수 있는 함수입니다. </p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">set_cancel</span><span class="params">(self, exchange, currency=None, order_id=None, qty=None)</span>:</span></span><br></pre></td></tr></table></figure><p><strong>A.9.1 exchange (str)</strong><br>Bot에서 사용하는 거래소의 명칭을 입력합니다.</p><p><strong>A.9.2. currency (str)</strong><br>취소할 주문의 가상화폐를 입력합니다.<br>(예: “btc”, “eth”, “xrp”, … )</p><p><strong>A.9.3. order_id (str)</strong><br>취소할 주문의 order_id를 입력합니다.<br>order_id를 입력하여 주문을 취소하는 경우 currency를 함께 입력해야 합니다.</p><p><strong>A.9.4. qty (float)</strong><br>주문 취소할 수량을 입력합니다.<br>수량을 입력하지 않는 경우 입력한 currency 또는 currency의 order_id에 남아 있는 주문 수량 전체를 취소합니다.</p><p>단, 부분 취소의 경우 coinone 거래소에서만 제공하며, upbit 거래소에서는 부분취소 기능을 제공하지 않습니다.<br>upbit 거래소의 경우 qty를 입력하더라도(currency와 order_id도 함께) 미체결 주문의 모든 수량을 주문취소합니다. </p><p>다음은 주문을 취소하는 4가지 방법에 대한 예시입니다. </p><p><img src="https://user-images.githubusercontent.com/47657715/56647750-eeee7300-66bc-11e9-8cdf-f593418a2fb1.png" alt="A.9 set_cancel Example01"><br><img src="https://user-images.githubusercontent.com/47657715/56647752-ef870980-66bc-11e9-993d-d2357aae3946.png" alt="A.9 set_cancel Example02"><br><img width="414" alt="A.9 set_cancel Example03" src="https://user-images.githubusercontent.com/47657715/56647753-ef870980-66bc-11e9-9224-7b6cca40816e.png"></p><p><img src="https://user-images.githubusercontent.com/47657715/56647860-252bf280-66bd-11e9-8cff-b681430bca8e.png" alt="A.9 set_cancel Example04"><br><img src="https://user-images.githubusercontent.com/47657715/56647862-25c48900-66bd-11e9-809a-fa74ba477871.png" alt="A.9 set_cancel Example05"></p><p><img src="https://user-images.githubusercontent.com/47657715/56647920-412f9400-66bd-11e9-8bf7-49802521eb18.png" alt="A.9 set_cancel Example06"><br><img src="https://user-images.githubusercontent.com/47657715/56647922-41c82a80-66bd-11e9-85b7-34e711432d39.png" alt="A.9 set_cancel Example07"></p><p>4개의 ‘XRP’ 주문이 들어간 상태에서 거래소의 미체결 주문 현황과 Bot의 order_list에 저장되어 있는 주문들에 대한 정보입니다.</p><p><strong>cancel #4 (특정 미체결 주문의 부분 취소)</strong><br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set_cancel(exchange=EXCHANGE_NAME, currency=CURRENCY, order_id=ORDER_ID, qty=QUANTITY)</span><br></pre></td></tr></table></figure></p><p>입력 받은 거래소의 해당 가상 화폐와 order_id를 갖는 주문을 입력받은 수량 만큼 부분 취소합니다.<br>입력한 qty가 미체결 수량보다 많은 경우 전체 수량을 취소하고, 적은 경우에는 부분 취소합니다. </p><p><img src="https://user-images.githubusercontent.com/47657715/56647980-61f7e980-66bd-11e9-9e47-d90bb8cc157a.png" alt="A.9 set_cancel Example08"><br><img src="https://user-images.githubusercontent.com/47657715/56647982-61f7e980-66bd-11e9-9a3d-dcb5a9b9f294.png" alt="A.9 set_cancel Example09"><br><img src="https://user-images.githubusercontent.com/47657715/56647984-62908000-66bd-11e9-83d5-8a0b709b1bdb.png" alt="A.9 set_cancel Example10"></p><p>주문 수량이 1이었던 주문을 0.5 수량만큼을 부분 취소하는 경우 order_list에서 해당 order_id의 remain_qty가 0.5로 남아 있는 것과, 거래소 미체결 주문 현황에 주문잔량이 0.5000으로 저장되어 있는 것을 확인할 수 있습니다.</p><p><strong>cancel #3 (특정 미체결 주문 전체 취소)</strong><br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set_cancel(exchange=EXCHANGE_NAME, currency=CURRENCY, order_id=ORDER_ID)</span><br></pre></td></tr></table></figure></p><p>qty를 입력하지 않는 경우 해당 가상화폐의 order_id를 갖는 주문의 미체결 수량 전체를 취소합니다.</p><p><img src="https://user-images.githubusercontent.com/47657715/56648074-94a1e200-66bd-11e9-9af4-4f5f87b6eb47.png" alt="A.9 set_cancel Example11"><br><img src="https://user-images.githubusercontent.com/47657715/56648075-94a1e200-66bd-11e9-8c0b-c68f9852764e.png" alt="A.9 set_cancel Example12"><br><img src="https://user-images.githubusercontent.com/47657715/56648076-94a1e200-66bd-11e9-86b8-2a67625db8af.png" alt="A.9 set_cancel Example13"></p><p><strong>cancel #2 (특정 거래소, 특정 가상 화폐의 미체결 주문 전체 취소)</strong><br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set_cancel(exchange=EXCHANGE_NAME, currency=CURRENCY)</span><br></pre></td></tr></table></figure></p><p>order_id를 입력하지 않고 가상화폐에 대한 정보만 입력한 경우 입력한 거래소의 currency에 해당하는 주문을 전부 취소합니다.</p><p><img src="https://user-images.githubusercontent.com/47657715/56648127-b26f4700-66bd-11e9-9896-776a78eb79e0.png" alt="A.9 set_cancel Example14"><br><img src="https://user-images.githubusercontent.com/47657715/56648128-b307dd80-66bd-11e9-9f4a-ec12424a7a6a.png" alt="A.9 set_cancel Example15"></p><p>거래소 명칭과 전체 취소할 가상화폐만을 입력한 경우, order_list와 거래소 미체결 주문 현황에 저장되어 있던 이전의 ‘XRP’ 주문들이 순차적으로 취소되어 모두 취소된 것을 확인할 수 있습니다.</p><p><strong>cancel #1 (특정 거래소의 미체결 주문 전체 취소)</strong><br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set_cancel(exchange=EXCHANGE_NAME)</span><br></pre></td></tr></table></figure></p><p>거래소의 명칭만 입력한 경우, 입력 받은 거래소에 전송된 주문에 대하여 가상화폐의 종류, 남은 수량과 관계 없이 모든 미체결 주문을 전체를 취소합니다.</p><p><img src="https://user-images.githubusercontent.com/47657715/56648187-cf0b7f00-66bd-11e9-94cb-f338c684f3fa.png" alt="A.9 set_cancel Example16"><br><img src="https://user-images.githubusercontent.com/47657715/56648190-cfa41580-66bd-11e9-86d5-15072e5024a6.png" alt="A.9 set_cancel Example17"></p><p><img src="https://user-images.githubusercontent.com/47657715/56648191-cfa41580-66bd-11e9-8e57-d01b4ce7eaa0.png" alt="A.9 set_cancel Example18"></p><p><img width="413" alt="A.9 set_cancel Example19" src="https://user-images.githubusercontent.com/47657715/56648192-d03cac00-66bd-11e9-90af-2699a05a8078.png"><br><img width="413" alt="A.9 set_cancel Example20" src="https://user-images.githubusercontent.com/47657715/56648193-d03cac00-66bd-11e9-93c0-bc5f1e4d4f9d.png"></p><p><img src="https://user-images.githubusercontent.com/47657715/56648194-d0d54280-66bd-11e9-9061-8e888ac71712.png" alt="A.9 set_cancel Example21"><br><img src="https://user-images.githubusercontent.com/47657715/56648196-d0d54280-66bd-11e9-8143-4f6c027eeb02.png" alt="A.9 set_cancel Example22"></p><p><img width="410" alt="A.9 set_cancel Example23" src="https://user-images.githubusercontent.com/47657715/56648198-d16dd900-66bd-11e9-9c31-06a650dcd0aa.png"><br><img width="411" alt="A.9 set_cancel Example24" src="https://user-images.githubusercontent.com/47657715/56648199-d16dd900-66bd-11e9-8ad0-9d26e1ec81cd.png"></p><p>‘XRP’와 ‘MIOTA’가 각각 수량 1 씩 주문된 상태에서, 거래소 명칭(예시에서는 ‘coinone’)만을 입력하여 set_cancel 함수를 호출한 경우 두 가상화폐의 미체결 주문들이 모두 취소 된 것을 확인할 수 있습니다.</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;A-9-set-cancel-함수의-사용과-사용-예시&quot;&gt;&lt;a href=&quot;#A-9-set-cancel-함수의-사용과-사용-예시&quot; class=&quot;headerlink&quot; title=&quot;A.9. set_cancel 함수의 사용과 사용 예시&quot;&gt;&lt;/a&gt;A
      
    
    </summary>
    
      <category term="CATS LAB" scheme="https://cantapiya.github.io/catslab_blog/categories/CATS-LAB/"/>
    
      <category term="Trade" scheme="https://cantapiya.github.io/catslab_blog/categories/CATS-LAB/Trade/"/>
    
    
  </entry>
  
  <entry>
    <title>A.10. 부가적인 기능의 함수들과 사용 예시</title>
    <link href="https://cantapiya.github.io/catslab_blog/catslab-trade-10-others-post/"/>
    <id>https://cantapiya.github.io/catslab_blog/catslab-trade-10-others-post/</id>
    <published>2019-02-25T14:00:00.000Z</published>
    <updated>2019-04-26T02:23:19.821Z</updated>
    
    <content type="html"><![CDATA[<h2 id="A-10-부가적인-기능의-함수들과-사용-예시"><a href="#A-10-부가적인-기능의-함수들과-사용-예시" class="headerlink" title="A.10. 부가적인 기능의 함수들과 사용 예시"></a>A.10. 부가적인 기능의 함수들과 사용 예시</h2><p>거래소별 API를 사용하는 함수에 접근하고, 거래소별 자산, 주문 현황, 체결 현황과 같은 정보에 접근하기 위해서는 Bot을 생성할 때 입력한 거래소의 명칭을 key값으로 가지는 exchanges class에 접근하여 사용이 가능합니다. </p><p>전략을 구현하고, Bot을 가동하는 과정에서 실시간으로 사용자의 Bot에 저장되어 있는 정보를 불러오는 함수들과 사용 예시들은 다음과 같습니다.</p><p>다음 예시는 “XRP”와 “MIOTA”를 각각 2개씩 매수주문을 넣은 상태에서 각각의 함수를 조회한 예시입니다.</p><p><img src="https://user-images.githubusercontent.com/47657715/56653584-e7cd6200-66c8-11e9-9720-51ab28b73441.png" alt="A.10 부가적인 기능의 함수 Example01"></p><p><strong>A.10.1. get_balance 함수</strong><br>거래소의 자산 보유량을 실시간으로 조회하는 함수입니다. </p><p>다음 예시는 현재의 ‘coinone’ 거래소의 자산 현황을 조회한 결과입니다. </p><p>초기 투입금액에서 “XRP”와 “MIOTA”를 각각 2개씩 매수주문을 넣은 상태에서의 자산 변화를 볼 수 있습니다.</p><p><img src="https://user-images.githubusercontent.com/47657715/56653585-e7cd6200-66c8-11e9-8724-83e783b0e16f.png" alt="A.10 부가적인 기능의 함수 Example02"></p><p><strong>A.10.2. get_time 함수</strong><br>현재 시간을 datetime 타입으로 불러오는 get_time 함수입니다.</p><p><img src="https://user-images.githubusercontent.com/47657715/56653586-e865f880-66c8-11e9-9564-d33627c08d5e.png" alt="A.10 부가적인 기능의 함수 Example03"></p><p><strong>A.10.3. get_order_list 함수</strong><br>현재 거래소의 미체결 주문 정보를 실시간으로 불러오는 함수입니다.</p><p><img src="https://user-images.githubusercontent.com/47657715/56653587-e865f880-66c8-11e9-806f-d057a32f51ed.png" alt="A.10 부가적인 기능의 함수 Example04"></p><p><strong>A.10.4. get_orders 함수</strong><br>Order 객체를 사용하여 set_order 함수(A.7. set_orders 참고)를 사용하게 되면, 생성한 주문들을 내부 함수를 이용하여 거래소로 전송하기 이전에 orders라는 list에 임시적으로 저장을 해 둡니다. </p><p>1분마다 스케쥴링을 반복하면서 orders에 추가된 주문을 주문이 지정된 시간별로 거래소로 전송하여 처리하게 됩니다. </p><p>전송된 주문들은 orders list에서 빠지게 되고, 미체결된 주문은 order_list에서 관리하게 됩니다.</p><p>orders에 저장된 주문은 전송하는 시간을 기점으로 하여 이전의 주문들은 모두 전송하는 방식으로 처리됩니다. </p><p>즉, 주문을 생성할 때 현재 시간, 혹은 이전의 시간으로 지정한 경우 다음 스케쥴링에서 거래소로 주문이 전송되며, 주문 시간을 지정하여 나중에 주문이 전송되도록 설정할 수도 있습니다. </p><p>예를 들어, 현재 시간의 한 시간 뒤의 시간으로 주문을 지정하는 경우 1시간 뒤 스케쥴링에서 거래소로 전송됩니다. </p><p>get_orders 함수는 현재 orders에 저장되어 있는 주문들의 list를 불러오는 함수입니다. </p><p><img src="https://user-images.githubusercontent.com/47657715/56653588-e8fe8f00-66c8-11e9-8d1b-760c9d4b932a.png" alt="A.10 부가적인 기능의 함수 Example05"></p><p><strong>A.10.5. calc_estimated 함수</strong><br>calc_estimated 함수는 현재 보유하고 있는 모든 자산의 현금 평가가격을 계산하여 반환해주는 함수입니다.</p><p>다음 예시는 “XRP”와 “MIOTA”를 각각 2개씩의 매수주문을 넣고, “XRP”의 주문이 모두 체결 된 상태에서 get_balance, get_order_list, calc_esimated 함수를 조회한 예시입니다. </p><p>주문이 체결 됬기 때문에 보유한 자산 목록에 avail이 증가한 것을 확인할 수 있고, 미체결 주문 리스트인 order_list에는 체결되지 않은 “MIOTA”의 주문이 남아 있는 상태입니다. </p><p>이때, calc_estimated 함수를 조회하여 조회 시점의 가상화폐의 가격을 기준으로 하여 계산한 현금 평가가격을 확인할 수 있습니다. </p><p><img src="https://user-images.githubusercontent.com/47657715/56653590-e8fe8f00-66c8-11e9-9ba9-98c299b9b51f.png" alt="A.10 부가적인 기능의 함수 Example06"><br><img src="https://user-images.githubusercontent.com/47657715/56653592-e9972580-66c8-11e9-9574-9211f521603f.png" alt="A.10 부가적인 기능의 함수 Example07"><br><img src="https://user-images.githubusercontent.com/47657715/56653593-e9972580-66c8-11e9-981f-0843b4f02ec2.png" alt="A.10 부가적인 기능의 함수 Example08"><br><img src="https://user-images.githubusercontent.com/47657715/56653595-ea2fbc00-66c8-11e9-8542-fd64ba97ee43.png" alt="A.10 부가적인 기능의 함수 Example09"></p><p><strong>A.10.6. clear_balance 함수</strong><br>clear_balance 함수는 현재 보유하고 있는 가상화폐들을 호가창의 정보를 이용하여 바로 청산을 하는 기능을 수행합니다. 보유하고 있는 가상화폐의 호가창의 가장 높은 금액으로 매도 주문을 넣습니다.</p><p>위의 예시에 이어지는 상황으로, “XRP” 주문이 체결된 후 clear_balance 함수를 호출하면 보유하고 있던 1.998개의 “XRP”를 바로 청산 주문을 하여 체결이 된 것을 확인할 수 있습니다.  </p><p><img src="https://user-images.githubusercontent.com/47657715/56653597-ea2fbc00-66c8-11e9-9a0c-be46aaf322a4.png" alt="A.10 부가적인 기능의 함수 Example10"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;A-10-부가적인-기능의-함수들과-사용-예시&quot;&gt;&lt;a href=&quot;#A-10-부가적인-기능의-함수들과-사용-예시&quot; class=&quot;headerlink&quot; title=&quot;A.10. 부가적인 기능의 함수들과 사용 예시&quot;&gt;&lt;/a&gt;A.10. 부가적인 기능
      
    
    </summary>
    
      <category term="CATS LAB" scheme="https://cantapiya.github.io/catslab_blog/categories/CATS-LAB/"/>
    
      <category term="Trade" scheme="https://cantapiya.github.io/catslab_blog/categories/CATS-LAB/Trade/"/>
    
    
  </entry>
  
  <entry>
    <title>B.0 Backtest 기본</title>
    <link href="https://cantapiya.github.io/catslab_blog/catslab-backtest-00-base-post/"/>
    <id>https://cantapiya.github.io/catslab_blog/catslab-backtest-00-base-post/</id>
    <published>2019-02-24T21:00:00.000Z</published>
    <updated>2019-04-26T05:12:00.052Z</updated>
    
    <content type="html"><![CDATA[<h2 id="B-0-Backtest-기본"><a href="#B-0-Backtest-기본" class="headerlink" title="B.0. Backtest 기본"></a>B.0. Backtest 기본</h2><p><strong>B.0. COZA package 및 필요한 모듈 및 함수 import</strong>  </p><ul><li>필수 </li></ul><p>BacktestContext 생성을 위해 import 합니다.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> coza.backtest <span class="keyword">import</span> BacktestContext</span><br></pre></td></tr></table></figure></p><p>backtest에서 가상으로 주문을 넣기 위한 Order 객체를 import 합니다.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> coza.objects <span class="keyword">import</span> Order</span><br></pre></td></tr></table></figure></p><ul><li>부가적으로 사용할 패키지 내의 객체나 함수 import</li></ul><p>전략에서 이용할 TA들을 import 합니다.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> coza.ta <span class="keyword">import</span> (TA_NAME)</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;B-0-Backtest-기본&quot;&gt;&lt;a href=&quot;#B-0-Backtest-기본&quot; class=&quot;headerlink&quot; title=&quot;B.0. Backtest 기본&quot;&gt;&lt;/a&gt;B.0. Backtest 기본&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;B.0. COZ
      
    
    </summary>
    
      <category term="CATS LAB" scheme="https://cantapiya.github.io/catslab_blog/categories/CATS-LAB/"/>
    
      <category term="Backtest" scheme="https://cantapiya.github.io/catslab_blog/categories/CATS-LAB/Backtest/"/>
    
      <category term="B.0 Backtest 기본" scheme="https://cantapiya.github.io/catslab_blog/categories/CATS-LAB/Backtest/B-0-Backtest-%EA%B8%B0%EB%B3%B8/"/>
    
    
  </entry>
  
  <entry>
    <title>B.1 BacktestContext의 생성</title>
    <link href="https://cantapiya.github.io/catslab_blog/catslab-backtest-01-context-post/"/>
    <id>https://cantapiya.github.io/catslab_blog/catslab-backtest-01-context-post/</id>
    <published>2019-02-24T20:00:00.000Z</published>
    <updated>2019-04-26T05:12:08.838Z</updated>
    
    <content type="html"><![CDATA[<h2 id="B-1-BacktestContext의-생성"><a href="#B-1-BacktestContext의-생성" class="headerlink" title="B.1. BacktestContext의 생성"></a>B.1. BacktestContext의 생성</h2><p>BACKTEST_NAME을 지정하여 아래의 parameter를 입력하여 BacktestContext를 생성할 수 있습니다. </p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">BACKTEST_NAME = BacktestContext(user_uuid, </span><br><span class="line">initialize, </span><br><span class="line">run_strategy, </span><br><span class="line">make_orders, </span><br><span class="line">use_data, </span><br><span class="line">data_path, </span><br><span class="line">save_result, </span><br><span class="line">return_result)</span><br></pre></td></tr></table></figure><p><strong>B.1.1. user_uuid</strong><br>Cats Lab에서 발급 받은 사용자의 user_uuid를 입력합니다.</p><p><strong>B.1.2. initialize</strong><br>A. Trade의 initialize 함수와 동일합니다.</p><p><strong>B.1.3. run_strategy</strong><br>A. Trade의 run_strategy 함수와 동일합니다.</p><p><strong>B.1.4. make_orders</strong><br>A. Trade의 make_orders 함수와 동일합니다.</p><p><strong>B.1.5. use_data (str, ‘LIVE’ 또는 ‘LOCAL’)</strong><br>use_data = “LIVE”로 입력할 경우 거래소 API를 이용하여 입력한 기간만큼의 캔들 데이터를 실시간으로 호출하여 사용합니다.</p><p>use_data = “LOCAL”로 입력할 경우 지정한 경로(B.1.6. data_path)의 입력한 가상화폐와 분봉에 해당하는 CSV 파일을 로드하여 사용합니다.</p><p><img width="555" alt="local candle data 파일의 format" src="https://user-images.githubusercontent.com/47657715/56639764-6536a980-66ac-11e9-9a3a-3d5c311beb0f.png"></p><p><strong>B.1.6. data_path (str)</strong><br>B.1.5. use_data에서 ‘LOCAL’ 모드로 입력하여 사용하는 경우, 캔들 데이터로 사용할 CSV 파일들의 경로를 입력합니다.</p><p><strong>B.1.7. return_result (bool)</strong><br>백테스트의 결과를 반환할 것인지에 대한 여부를 bool 타입으로 입력합니다. </p><p>로컬에서 백테스트를 실행할 경우 백테스트 결과를 확인하기 위해 True로 입력하여 반환 받은 result 객체로 접근이 가능합니다.</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;B-1-BacktestContext의-생성&quot;&gt;&lt;a href=&quot;#B-1-BacktestContext의-생성&quot; class=&quot;headerlink&quot; title=&quot;B.1. BacktestContext의 생성&quot;&gt;&lt;/a&gt;B.1. BacktestCon
      
    
    </summary>
    
      <category term="CATS LAB" scheme="https://cantapiya.github.io/catslab_blog/categories/CATS-LAB/"/>
    
      <category term="Backtest" scheme="https://cantapiya.github.io/catslab_blog/categories/CATS-LAB/Backtest/"/>
    
      <category term="B.1 BacktestContext의 생성" scheme="https://cantapiya.github.io/catslab_blog/categories/CATS-LAB/Backtest/B-1-BacktestContext%EC%9D%98-%EC%83%9D%EC%84%B1/"/>
    
    
  </entry>
  
  <entry>
    <title>B.2 Backtest 실행</title>
    <link href="https://cantapiya.github.io/catslab_blog/catslab-backtest-02-run-post/"/>
    <id>https://cantapiya.github.io/catslab_blog/catslab-backtest-02-run-post/</id>
    <published>2019-02-24T19:00:00.000Z</published>
    <updated>2019-04-26T05:12:57.198Z</updated>
    
    <content type="html"><![CDATA[<h2 id="B-2-Backtest-실행"><a href="#B-2-Backtest-실행" class="headerlink" title="B.2. Backtest 실행"></a>B.2. Backtest 실행</h2><p>생성한 BacktestContext를 run 함수를 이용하여 백테스트를 실행시킵니다.<br>결과를 저장할 RESULT_NAME을 지정합니다.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">RESULT_NAME = BACKTEST_NAME.run(start_date, </span><br><span class="line">end_date, </span><br><span class="line">exchange, </span><br><span class="line">init_budget, </span><br><span class="line">slippage_rate)</span><br></pre></td></tr></table></figure><p><strong>B.2.1. start_date (datetime.datetime)</strong><br>백테스트를 실행할 기간 중 시작 시점의 datetime을 입력합니다.</p><p><strong>B.2.2. end_date (datetime.datetime)</strong><br>백테스트를 실행할 기간 중 종료 시점의 datetime을 입력합니다.</p><p><strong>B.2.3. exchange (str)</strong><br>백테스트를 실행할 때에 사용할 거래소의 명칭을 입력합니다.</p><p><strong>B.2.4. init_budget</strong><br>백테스트의 초기 투입 자산을 입력합니다.</p><p><strong>B.2.5. slippage_rate</strong><br>백테스트를 실행할 때 고려할 슬리피지 비율을 입력합니다. </p><p>실제 거래와 달리 백테스트에서는 주문한 매수주문/매도주문은 즉시 체결된 것으로 간주하여 결과를 반영하기 때문에, 실제 거래에서 발생할 수 있는 주문 미체결의 문제와 호가의 차이를 고려한 것이 슬리피지 비율입니다.</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;B-2-Backtest-실행&quot;&gt;&lt;a href=&quot;#B-2-Backtest-실행&quot; class=&quot;headerlink&quot; title=&quot;B.2. Backtest 실행&quot;&gt;&lt;/a&gt;B.2. Backtest 실행&lt;/h2&gt;&lt;p&gt;생성한 BacktestCont
      
    
    </summary>
    
      <category term="CATS LAB" scheme="https://cantapiya.github.io/catslab_blog/categories/CATS-LAB/"/>
    
      <category term="Backtest" scheme="https://cantapiya.github.io/catslab_blog/categories/CATS-LAB/Backtest/"/>
    
      <category term="B.2 Backtest 실행" scheme="https://cantapiya.github.io/catslab_blog/categories/CATS-LAB/Backtest/B-2-Backtest-%EC%8B%A4%ED%96%89/"/>
    
    
  </entry>
  
  <entry>
    <title>B.3 ~ B.6 initialize, run_strategy, make_orders, Order 작성</title>
    <link href="https://cantapiya.github.io/catslab_blog/catslab-backtest-03-06-initialize-run-strategy-make-orders-order-post/"/>
    <id>https://cantapiya.github.io/catslab_blog/catslab-backtest-03-06-initialize-run-strategy-make-orders-order-post/</id>
    <published>2019-02-24T18:00:00.000Z</published>
    <updated>2019-04-26T05:12:34.538Z</updated>
    
    <content type="html"><![CDATA[<h2 id="B-3-B-6-initialize-run-strategy-make-orders-Order-작성"><a href="#B-3-B-6-initialize-run-strategy-make-orders-Order-작성" class="headerlink" title="B.3. ~ B.6. initialize, run_strategy, make_orders, Order 작성"></a>B.3. ~ B.6. initialize, run_strategy, make_orders, Order 작성</h2><h3 id="B-3-initialize의-작성"><a href="#B-3-initialize의-작성" class="headerlink" title="B.3. initialize의 작성"></a>B.3. initialize의 작성</h3><p>A. Trade의 initialize 함수와 동일합니다.</p><h3 id="B-4-run-strategy-작성"><a href="#B-4-run-strategy-작성" class="headerlink" title="B.4. run_strategy 작성"></a>B.4. run_strategy 작성</h3><p>기본적으로 A. Trade의 make_orders 함수와 동일하나 1분 주기로 dataframe을 업데이트하고 그에 따른 기술적 지표를 업데이트하는 Trade에서와는 달리, Backtest에서는 dataframe의 업데이트가 발생하지 않고 처음 BacktestContext를 생성할 때 입력된 기간동안의 dataframe 및 기술적 지표를 한 번에 연산하여 저장합니다. </p><p>백테스트를 실행하면 사용자가 입력한 가상화폐와 분봉들마다 저장해놓은 dataframe을 순차적으로 잘라서 가져오는 방식이기 때문에 1분 주기로 run_strategy를 실행하는 과정이 생략됩니다.</p><h3 id="B-5-make-orders-작성"><a href="#B-5-make-orders-작성" class="headerlink" title="B.5. make_orders 작성"></a>B.5. make_orders 작성</h3><p>A. Trade의 make_orders 함수와 동일합니다.</p><h3 id="B-6-Order-객체-생성"><a href="#B-6-Order-객체-생성" class="headerlink" title="B.6. Order 객체 생성"></a>B.6. Order 객체 생성</h3><p>A. Trade의 Order 객체와 동일합니다.</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;B-3-B-6-initialize-run-strategy-make-orders-Order-작성&quot;&gt;&lt;a href=&quot;#B-3-B-6-initialize-run-strategy-make-orders-Order-작성&quot; class=&quot;headerl
      
    
    </summary>
    
      <category term="CATS LAB" scheme="https://cantapiya.github.io/catslab_blog/categories/CATS-LAB/"/>
    
      <category term="Backtest" scheme="https://cantapiya.github.io/catslab_blog/categories/CATS-LAB/Backtest/"/>
    
      <category term="B.3 ~ B.6 initialize run_strategy make_orders Order 작성" scheme="https://cantapiya.github.io/catslab_blog/categories/CATS-LAB/Backtest/B-3-B-6-initialize-run-strategy-make-orders-Order-%EC%9E%91%EC%84%B1/"/>
    
    
  </entry>
  
  <entry>
    <title>B.7 Result 객체의 생성 및 사용 예시</title>
    <link href="https://cantapiya.github.io/catslab_blog/catslab-backtest-07-result-post/"/>
    <id>https://cantapiya.github.io/catslab_blog/catslab-backtest-07-result-post/</id>
    <published>2019-02-24T17:00:00.000Z</published>
    <updated>2019-04-26T05:13:08.139Z</updated>
    
    <content type="html"><![CDATA[<h2 id="B-7-Result-객체의-생성-및-사용-예시"><a href="#B-7-Result-객체의-생성-및-사용-예시" class="headerlink" title="B.7. Result 객체의 생성 및 사용 예시"></a>B.7. Result 객체의 생성 및 사용 예시</h2><p>생성한 BacktestContext를 run 함수를 이용하여 백테스트를 실행시킨 뒤 그 결과를 Result 객체로 생성하여 저장 및 반환합니다. Result 객체에 저장되어 있는 정보는 아래와 같습니다. </p><p>백테스트 결과를 도식화 하는 plot 함수의 기능은 B.8. plot을 참고하시기 바랍니다.</p><p>백테스트 결과를 저장하기 위해 지정한 RESULT_NAME을 이용하여 각각의 정보로 접근할 수 있습니다.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RESULT_NAME = BacktestContext_NAME.run(start_date, end_date, exchange, init_budget, slippage_rate)</span><br></pre></td></tr></table></figure><p><img src="https://user-images.githubusercontent.com/47657715/56654634-83f86880-66cb-11e9-9f51-ddfedfeb305c.png" alt="B.7 Result 객체 Example01"><br><img src="https://user-images.githubusercontent.com/47657715/56654635-8490ff00-66cb-11e9-92ea-58264b3b7f6c.png" alt="B.7 Result 객체 Example02"></p><p><strong>B.7.1. created_time</strong><br>백테스트를 실행하여 Result 객체를 생성한 시간에 대한 정보입니다.</p><p><strong>B.7.2. elapsed_time</strong><br>백테스트를 수행하는 데에 소요된 전체 경과시간에 대한 정보입니다. </p><p><strong>B.7.3. earning_rate</strong><br>백테스트 초기 투입 자산 대비 종료 시점의 자산의 수익률을 나타내는 정보입니다. </p><p><img src="https://user-images.githubusercontent.com/47657715/56654638-8490ff00-66cb-11e9-93d5-96c37e941859.png" alt="B.7 Result 객체 Example03"></p><p><strong>B.7.4. final_balance</strong><br>백테스트 종료 후 최종 시점의 자산 보유량에 대한 정보입니다.</p><p><img src="https://user-images.githubusercontent.com/47657715/56654639-85299580-66cb-11e9-9577-1fdb53e774fd.png" alt="B.7 Result 객체 Example04"></p><p><strong>B.7.5. estimated_list</strong><br>백테스트를 진행하는 과정에서 매수 또는 매도가 발생했을 때의 거래 정보 및 그 시점에 보유한 모든 자산의 현금 평가가격에 대한 정보를 저장하고 있는 list입니다.</p><p>estimated_list에 저장되는 정보의 타입은 ‘datetime’이 key값이고 거래가 발생하는 시점의 datetime을 value값으로 갖는 정보와 ‘estimated’가 key값이고 그 시점의 현금 평가가격을 value값으로 가지는 dictionary 타입입니다.</p><p><img src="https://user-images.githubusercontent.com/47657715/56654640-85299580-66cb-11e9-87cd-ec96fc849106.png" alt="B.7 Result 객체 Example05"></p><p><strong>B.7.6. total_fee</strong><br>백테스트를 진행하는 과정에서 일어난 거래들의 총 수수료를 나타내는 정보입니다.</p><p><img src="https://user-images.githubusercontent.com/47657715/56654642-85c22c00-66cb-11e9-8e7d-b00f8584b254.png" alt="B.7 Result 객체 Example06"></p><p><strong>B.7.7. total_slippage</strong><br>백테스트를 진행하는 과정에서 입력한 slippage_rate을 기반으로 계산한 총 슬리피지 비용을 나타내는 정보입니다.</p><p><img src="https://user-images.githubusercontent.com/47657715/56654643-85c22c00-66cb-11e9-92ff-aa45a09a1593.png" alt="B.7 Result 객체 Example07"></p><p><strong>B.7.8. max_profit</strong><br>백테스트를 진행하는 과정에서 최대로 얻은 이익의 수익률에 대한 정보입니다.</p><p><img src="https://user-images.githubusercontent.com/47657715/56654646-865ac280-66cb-11e9-80c2-e9bfa92eed3e.png" alt="B.7 Result 객체 Example08"></p><p><strong>B.7.9. max_loss</strong><br>백테스트를 진행하는 과정에서 최대로 손실을 보게 된 시점의 수익률에 대한 정보입니다.</p><p><img src="https://user-images.githubusercontent.com/47657715/56654648-86f35900-66cb-11e9-99be-7c1514705f57.png" alt="B.7 Result 객체 Example09"></p><p><strong>B.7.10. trade_history</strong><br>백테스트 진행 과정에서 일어난 모든 거래에 대한 정보를 저장하고 있는 dictionary입니다. </p><p>거래가 일어난 시점의 datetime을 key값으로 하고, 거래가 일어난 시점의 자산 보유 현황(‘balance’)과, 수익률(‘earning_rate’), 평가가격(‘estimated’), Order 객체로 생성되어 저장되어 있는 ‘order_list’에 대한 정보가 포함되어 있습니다. </p><p><img src="https://user-images.githubusercontent.com/47657715/56654651-86f35900-66cb-11e9-9832-626821d66213.png" alt="B.7 Result 객체 Example10"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;B-7-Result-객체의-생성-및-사용-예시&quot;&gt;&lt;a href=&quot;#B-7-Result-객체의-생성-및-사용-예시&quot; class=&quot;headerlink&quot; title=&quot;B.7. Result 객체의 생성 및 사용 예시&quot;&gt;&lt;/a&gt;B.7. Resul
      
    
    </summary>
    
      <category term="CATS LAB" scheme="https://cantapiya.github.io/catslab_blog/categories/CATS-LAB/"/>
    
      <category term="Backtest" scheme="https://cantapiya.github.io/catslab_blog/categories/CATS-LAB/Backtest/"/>
    
      <category term="B.7 Result 객체의 생성 및 사용 예시" scheme="https://cantapiya.github.io/catslab_blog/categories/CATS-LAB/Backtest/B-7-Result-%EA%B0%9D%EC%B2%B4%EC%9D%98-%EC%83%9D%EC%84%B1-%EB%B0%8F-%EC%82%AC%EC%9A%A9-%EC%98%88%EC%8B%9C/"/>
    
    
  </entry>
  
  <entry>
    <title>B.8 plot 함수의 사용 방법 및 사용 예시</title>
    <link href="https://cantapiya.github.io/catslab_blog/catslab-backtest-08-plot-post/"/>
    <id>https://cantapiya.github.io/catslab_blog/catslab-backtest-08-plot-post/</id>
    <published>2019-02-24T16:00:00.000Z</published>
    <updated>2019-04-26T05:13:16.300Z</updated>
    
    <content type="html"><![CDATA[<h2 id="B-8-plot-함수의-사용-방법-및-사용-예시"><a href="#B-8-plot-함수의-사용-방법-및-사용-예시" class="headerlink" title="B.8. plot 함수의 사용 방법 및 사용 예시"></a>B.8. plot 함수의 사용 방법 및 사용 예시</h2><p>Result 객체를 이용하여 사용할 수 있는 plot 함수는 백테스트에 이용한 가상화폐의 가격(종가 기준)의 변화와 백테스트 과정에서 거래가 발생한 시점마다 저장 되는 평가가격을 기반으로 자산의 변화를 도식화시켜주는 함수입니다. 이 함수의 사용 방법은 다음과 같습니다.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">plot</span><span class="params">(add_marker, current_list, main_interval)</span></span></span><br></pre></td></tr></table></figure><p><strong>B.8.1. add_marker (bool)</strong><br>거래가 발생하는 시점을 매수와 매도를 구분하여 marker로 표시할지에 대한 여부를 입력합니다. </p><p>plot 함수는 기본적으로 백테스트 기간 동안 거래에 이용한 가상화폐의 가격 변화 그래프를 보여주는데, add_marker=True로 입력하는 경우 거래가 발생한 매 시점의 가격이 매수주문과 매도주문을 구분하여 가격 변화 그래프 위에 표시됩니다.</p><p><strong>B.8.2. currenct_list</strong><br>그래프를 그릴 때, 사용자가 도식화하고자 하는 가상화폐의 종류를 입력합니다. </p><p>한 가지 가상화폐만 입력할 수도 있고, 여러 개를 입력하는 경우 여러 가상화폐의 가격 변화를 하나의 그래프에 동시에 나타낼 수도 있습니다.</p><p><strong>B.8.3. main_interval</strong><br>입력한 가상화폐의 가격 변화를 종가를 기준으로 하여 그래프를 그리는데, 종가가격의 기준이 되는 분봉을 입력하는 parameter입니다.  </p><p>plot 함수의 사용 예시는 다음과 같습니다.</p><p><img src="https://user-images.githubusercontent.com/47657715/56639515-d3c73780-66ab-11e9-81db-85f57e5a383d.png" alt="Backtest Result Plot Example01"></p><p><img src="https://user-images.githubusercontent.com/47657715/56641034-57ceee80-66af-11e9-82a9-0fee9fa2a849.png" alt="Backtest Result Plot Example02"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;B-8-plot-함수의-사용-방법-및-사용-예시&quot;&gt;&lt;a href=&quot;#B-8-plot-함수의-사용-방법-및-사용-예시&quot; class=&quot;headerlink&quot; title=&quot;B.8. plot 함수의 사용 방법 및 사용 예시&quot;&gt;&lt;/a&gt;B.8. pl
      
    
    </summary>
    
      <category term="CATS LAB" scheme="https://cantapiya.github.io/catslab_blog/categories/CATS-LAB/"/>
    
      <category term="Backtest" scheme="https://cantapiya.github.io/catslab_blog/categories/CATS-LAB/Backtest/"/>
    
      <category term="B.8 plot 함수의 사용 방법 및 사용 예시" scheme="https://cantapiya.github.io/catslab_blog/categories/CATS-LAB/Backtest/B-8-plot-%ED%95%A8%EC%88%98%EC%9D%98-%EC%82%AC%EC%9A%A9-%EB%B0%A9%EB%B2%95-%EB%B0%8F-%EC%82%AC%EC%9A%A9-%EC%98%88%EC%8B%9C/"/>
    
    
  </entry>
  
</feed>
